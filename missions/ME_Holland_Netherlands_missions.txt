ME_HOL_slot_1_branch = {
	slot = 1
	generic = no
	ai = yes
	potential_on_load = {
		always = yes
	}
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		OR = {
			tag = HOL
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	ME_HOL_Bishop_Of_Utrecht = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Hook_And_Cod_Legacy }
		position = 2
		completed_by = 1460.1.1
		provinces_to_highlight = {
		}
		trigger = {
			reverse_has_opinion = {
				who = PAP
				value = 100
			}
			papal_influence = 50
			UTR = {
				religion = ROOT
			}
		}
		effect = {
			country_event = {
				id = ME_HOL_events.11
			}
		}
	}
	ME_HOL_Alignment_Of_Utrecht = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Bishop_Of_Utrecht }
		position = 2
		completed_by = 1460.1.1
		provinces_to_highlight = {
		}
		trigger = {
			OR = {
				UTR = {
					dynasty = HOL
				}
				98 = {
					OR = {
						owned_by = HOL
						owner = {
							is_subject_of = HOL
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					98 = {
						OR = {
							owned_by = HOL
							owner = {
								is_subject_of = HOL
							}
						}
					}
				}
				98 = {
					add_core = ROOT
				}
			}
			else = {
				country_event = {
					id = ME_HOL_events.13
				}
			}
		}
	}
}

ME_HOL_slot_2_branch = {
	slot = 2
	generic = no
	ai = yes
	potential_on_load = {
		always = yes
	}
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		OR = {
			tag = HOL
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	ME_HOL_Hook_And_Cod_Legacy = {
		icon = ME_HOL_dutch_ship
		required_missions = { }
		position = 1
		completed_by = 1460.1.1
		provinces_to_highlight = {
		}
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = BUR
					value = 150
				}
				army_size_percentage = 1
			}
		}
		effect = {
			custom_tooltip = ME_HOL_Hook_And_Cod_TT_1
			tooltip = {
				country_event = {
					id = ME_HOL_events.7
				}
			}
			custom_tooltip = ME_HOL_Hook_And_Cod_TT_2
			tooltip = {
				country_event = {
					id = ME_HOL_events.8
				}
			}
			custom_tooltip = ME_HOL_Hook_And_Cod_TT_3
			tooltip = {
				country_event = {
					id = ME_HOL_events.9
				}
			}
			hidden_effect = {
				if = {
					limit = {
						army_size_percentage = 1
						NOT = {
							reverse_has_opinion = {
								who = BUR
								value = 150
							}
						}
					}
					country_event = {
						id = ME_HOL_events.7
					}
				}
				if = {
					limit = {
						army_size_percentage = 1
						NOT = {
							reverse_has_opinion = {
								who = BUR
								value = 150
							}
						}
					}
					country_event = {
						id = ME_HOL_events.8
					}
				}
				else_if = {
					limit = {
						army_size_percentage = 1
						reverse_has_opinion = {
							who = BUR
							value = 150
						}
					}
					country_event = {
						id = ME_HOL_events.9
					}
				}
			}
		}
	}
	ME_HOL_Unite_The_Low_Counties = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Hook_And_Cod_Legacy }
		position = 2
		completed_by = 1480.1.1
		provinces_to_highlight = {
		}
		trigger = {
			calc_true_if = {
				amount = 3
				ROOT = {
					OR = {
						advisor = statesman
						advisor = diplomat
					}
					OR = {
						advisor = army_reformer
						advisor = grand_captain
					}
					years_of_income = 2.5
					manpower_percentage = 0.75
				}
			}
		}
		effect = {
			custom_tooltip = ME_HOL_Unite_The_Low_Counties_TT_1
			tooltip = {
				add_country_modifier = {
					name = ME_HOL_diplomatic_approach
					duration = 3650
				}
			}
			custom_tooltip = ME_HOL_Unite_The_Low_Counties_TT_2
			tooltip = {
				add_country_modifier = {
					name = ME_HOL_military_approach
					duration = 3650
				}
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							advisor = statesman
							advisor = diplomat
						}
						years_of_income = 2.5
					}
					add_country_modifier = {
						name = ME_HOL_diplomatic_approach
						duration = 9125
					}
				}
				if = {
					limit = {
						OR = {
							advisor = army_reformer
							advisor = grand_captain
						}
						manpower_percentage = 0.75
					}
					add_country_modifier = {
						name = ME_HOL_military_approach
						duration = 9125
					}
				}
			}
		}
	}
	ME_HOL_County_Of_Flanders = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Unite_The_Low_Counties }
		position = 3
		completed_by = 1500.1.1
		provinces_to_highlight = {
			area = flanders_area
		}
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = FLA
					value = 150
				}
				flanders_area = {
					type = all
					owned_by = ROOT
				}
			}
		}
		effect = {
			custom_tooltip = ME_HOL_County_Of_Flanders_TT_1
			if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
				}
				tooltip = {
					add_country_modifier = {
						name = ME_HOL_GE_County_Of_Flanders
						duration = 9125
					}
				}
			}
			else = {
				custom_tooltip = ME_HOL_County_Of_Flanders_TT_1
				tooltip = {
					add_country_modifier = {
						name = ME_HOL_County_Of_Flanders
						duration = 9125
					}
				}
			}
			custom_tooltip = ME_HOL_County_Of_Flanders_TT_2
			tooltip = {
				country_event = {
					id = ME_HOL_events.15
				}
			}
			hidden_effect = {
				if = {
					limit = {
						flanders_area = {
							type = all
							owned_by = ROOT
						}
						has_global_flag = governments_expanded_mod_active
					}
					add_country_modifier = {
						name = ME_HOL_GE_County_Of_Flanders
						duration = 9125
					}
				}
				else_if = {
					limit = {
						flanders_area = {
							type = all
							owned_by = ROOT
						}
						has_country_flag = governments_expanded_mod_active
					}
					add_country_modifier = {
						name = ME_HOL_County_Of_Flanders
						duration = 9125
					}
				}
				else_if = {
					limit = {
						reverse_has_opinion = {
							who = FLA
							value = 150
						}
					}
					country_event = {
						id = ME_HOL_events.15
					}
				}
			}
		}
	}
	ME_HOL_Dutch_Independence = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_County_Of_Flanders }
		position = 3
		completed_by = 1500.1.1
		provinces_to_highlight = {
			owned_by = BUR
		}
		trigger = {
			OR = {
				is_in_war = {
					attacker_leader = ROOT
					#defender_leader = BUR
					casus_belli = cb_independence_war
				}
				NOT = {
					exists = BUR
				}
			}
		}
		effect = {
			if = {
				limit = {
					exists = BUR
				}
				BUR = {
					every_rival_country = { 
						country_event = {
							id = ME_HOL_events.19
						}
					}
				}
				GEL = {
					country_event = {
						id = ME_HOL_events.19
					}
				}
				LIE = {
					country_event = {
						id = ME_HOL_events.19
					}
				}
				hidden_effect = {
					country_event = {
						id = ME_HOL_events.21
						days = 50
						random = 15
					}
				}
			}
			else = {
				add_prestige = 10
			}
		}
	}
}

ME_HOL_slot_3_branch = {
	slot = 3
	generic = no
	ai = yes
	potential_on_load = {
		always = yes
	}
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		OR = {
			tag = HOL
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	ME_HOL_Hanseatic_Wars = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Burgundian_Development }
		position = 2
		completed_by = 1460.1.1
		
		provinces_to_highlight = {
			id = 45
		}
		
		trigger = {
			OR = {
				if = {
					limit = {
						OR = {
							has_dlc = "Wealth of Nations"
							has_dlc = "El Dorado"
							has_dlc = "Mare Nostrum"
							has_dlc = "Golden Century"
						}
					}
					45 = { #Lubeck
						privateer_power = {
							country = FROM
							share = 10
						}
					}
				}
				else = {
					trade_embargoing = HSA
				}
				NOT = {
					exists = HSA
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					exists = HSA
				}
				HSA = {
					country_event = {
						id = ME_HOL_events.4
					}
				}
			}
			else_if = {
				limit = {
					45 = {
						owned_by = ROOT
					}
				}
				add_dip_power = 100
			}
			else = {
				add_prestige = 10
			}
		}
	}
	ME_HOL_Duchy_Of_Brabant = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Unite_The_Low_Counties }
		position = 3
		completed_by = 1500.1.1
		provinces_to_highlight = {
			area = north_brabant_area
			area = brabant_area
		}
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = BRB
					value = 150
				}
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 3
					OR = {
						area = north_brabant_area
						area = brabant_area
					}
				}
			}
		}
		effect = {
			custom_tooltip = ME_HOL_Duchy_Of_Brabant_TT_1
			if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
				}
				tooltip = {
					lorraine_area = {
						type = all
						add_claim = ROOT
					}
				}
			}
			custom_tooltip = ME_HOL_Duchy_Of_Brabant_TT_2
			tooltip = {
				country_event = {
					id = ME_HOL_events.17
				}
			}
			hidden_effect = {
				if = {
					limit = {
						num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
							value = 3
							OR = {
								area = north_brabant_area
								area = brabant_area
							}
						}
					}
					lorraine_area = {
						type = all
						add_claim = ROOT
					}
				}
				else_if = {
					limit = {
						reverse_has_opinion = {
							who = BRB
							value = 150
						}
					}
					country_event = {
						id = ME_HOL_events.17
					}
				}
			}
		}
	}
}

ME_HOL_slot_4_branch = {
	slot = 4
	generic = no
	ai = yes
	potential_on_load = {
		always = yes
	}
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		OR = {
			tag = HOL
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	ME_HOL_Burgundian_Development = {
		icon = ME_HOL_dutch_ship
		required_missions = { }
		position = 1
		completed_by = 1460.1.1
		provinces_to_highlight = {
			owner = {
				tag = BUR
			}
		}
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = BUR
					value = 150
				}
				navy_size_percentage = 1
			}
		}
		effect = {
			if = {
				limit = {
					navy_size_percentage = 1
				}
				add_country_modifier = {
					name = ME_HOL_A_Dutch_Navy
					duration = 9125
				}
			}
			else = {
				97 = {
					add_province_modifier = {
						name = "ME_HOL_Burgundian_Shipwrights"
						duration = 9125
					}
				}
				4383 = {
					add_province_modifier = {
						name = "ME_HOL_Burgundian_Shipwrights"
						duration = 9125
					}
				}
				96 = {
					add_province_modifier = {
						name = "ME_HOL_Burgundian_Shipwrights"
						duration = 9125
					}
				}
			}
		}
	}
	ME_HOL_Compete_With_The_Hansa = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Burgundian_Development }
		position = 2
		completed_by = 1460.1.1
		
		provinces_to_highlight = {
			owner = {
				tag = HSA
			}
		}
		
		trigger = {
			45 = { #Lubeck
				trade_share = {
					country = ROOT
					share = 15
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
				}
				add_country_modifier = {
					name = ME_HOL_Baltic_Expedition_GE
					duration = 9125
				}
			}
			else = {
				add_country_modifier = {
					name = ME_HOL_Baltic_Expedition
					duration = 9125
				}
			}
			country_event = {
				id = ME_HOL_events.1
				days = 30
			}
		}
	}
	ME_HOL_baltic_trade = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Compete_With_The_Hansa }
		position = 3
		completed_by = 1480.1.1
		
		provinces_to_highlight = {
			region = baltic_region
			region = scandinavia
		}
		
		trigger = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = ME_HOL_Baltic_Trade_TT
					any_country = {
						any_owned_province = {
							OR = {
								region = baltic_region
								region = scandinavia
							}
						}
						OR = {
							has_country_flag = GE_Rural_Trade_Deal_From_HOL
							has_country_flag = GE_Rural_Trade_Deal_From_NED
						}
					}
				}
				45 = { #Lubeck
					trade_share = {
						country = ROOT
						share = 25
					}
				}
				1926 = { #Baltic
					trade_share = {
						country = ROOT
						share = 25
					}
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
				}
				add_country_modifier = {
					name = ME_HOL_Baltic_Trade_modifier_1
					duration = -1
				}
			}
			else = {
				97 = {
					add_province_modifier = {
						name = "ME_HOL_Baltic_Trade_modifier_2"
						duration = 9125
					}
				}
			}
		}
	}
	ME_HOL_Mother_Of_All_Trade = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_baltic_trade }
		position = 3
		completed_by = 1480.1.1
		
		provinces_to_highlight = {
		}
		
		trigger = {
			calc_true_if = {
				amount = 2
				custom_trigger_tooltip = {
					tooltip = ME_HOL_Grain_Imports_TT
					check_variable = {
						which = GE_num_of_incoming_rural_trade
						value = 2
					}
				}
				1926 = { #Baltic
					is_strongest_trade_power = ROOT
				}
				has_reform = guild_dominance_reform
			}
		}
		
		effect = {
			custom_tooltip = ME_HOL_Mother_Of_All_Trade_TT_1
			if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
					has_reform = guild_dominance_reform
				}
				add_government_reform = guild_dominance_reform_upgrade
			}
			else_if = {
				limit = {
					has_global_flag = governments_expanded_mod_active
				}
				add_country_modifier = {
					name = ME_HOL_Mother_Of_All_Trade_modifier #10% Provincial Trade and 0.5 NT
					duration = 9125
				}
			}
			else = {
				add_country_modifier = {
					name = ME_HOL_Mother_Of_All_Trade_modifier #10% Provincial Trade and 0.5 NT
					duration = -1
				}
			}
		}
	}
}

ME_HOL_slot_5_branch = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		always = yes
	}
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		OR = {
			tag = HOL
		}
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ME_HOL_Expansion_Of_Amsterdam = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Burgundian_Development }
		position = 2
		completed_by = 1470.1.1
		
		provinces_to_highlight = {
			id = 97
		}
		
		trigger = {
			97 = {
				development = 20
			}
		}
		
		effect = {
			add_country_modifier = {
				name = ME_HOL_Amsterdam_Merchants
				duration = 9125
			}
		}
	
	}
	ME_HOL_Embrace_The_Renaissance = {
		icon = ME_HOL_dutch_ship
		required_missions = { } #{ ME_HOL_Expansion_Of_Amsterdam  }
		position = 3
		completed_by = 1470.1.1
		
		provinces_to_highlight = {
		}
		
		trigger = {
			capital_scope = {
				renaissance = 50
				has_building = marketplace
			}
		}
		
		effect = {
			capital_scope = {
				add_next_institution_embracement = 50
			}
			define_advisor = {
				type = artist
				name = "Hieronymus Bosch"
				skill = 2
				culture = dutch
				religion = catholic
				cost_multiplier = 0.50
			}
		}
	}
	ME_HOL_Dutch_Renaissance = {
		icon = ME_HOL_dutch_ship
		required_missions = { ME_HOL_Embrace_The_Renaissance ME_HOL_Mother_Of_All_Trade }
		position = 5
		completed_by = 1470.1.1
		
		provinces_to_highlight = {
		}
		
		trigger = {
			has_institution = renaissance
		}
		
		effect = {
			add_country_modifier = {
				name = ME_HOL_Early_Netherlandish_Painting
				duration = 36500
			}
		}
	}
}