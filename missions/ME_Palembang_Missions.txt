PLB_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
	}
	has_country_shield = yes
	
	PLB_tarumanagara = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_legacy_of_srivijaya }
		position = 3
		provinces_to_highlight = {
			OR = {
				area = central_java_area
				area = west_java_area 
				area = banten_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = central_java_area
					area = west_java_area 
					area = banten_area
				}
				value = 6
			}
		}
		effect = {
			add_country_modifier = {
				name = PLB_heirs_of_tarumanagara_defeated
				duration = -1
			}
			east_java_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			surabaya_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
	}
	
	PLB_majapahit_kneels = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_tarumanagara }
		position = 5
		provinces_to_highlight = {
			MSA_is_in_java = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_java = yes
				value = 14
			}
		}
		effect = {
			add_army_tradition_or_mil_power = { amount = 10 }
			add_country_modifier = {
				name = PLB_defeated_the_empire
				duration = 7300
			}
			sulawesi_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			makassar_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			south_sulawesi_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
	}
	
	PLB_sri_tri_buana = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_majapahit_kneels PLB_langkasuka }
		position = 7
		provinces_to_highlight = {
			OR = {
				MSA_is_in_java = yes
				MSA_is_in_sumatra = yes
				MSA_is_in_malaya = yes
			}
			#NOT = { owned_by = ROOT }
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = PLB_owns_all_of_highlighted
				malacca_area = {
					type = all
					owned_by = ROOT
				}
				malaya_area = {
					type = all
					owned_by = ROOT
				}
				north_malaya_area = {
					type = all
					owned_by = ROOT
				}
				johor_area = {
					type = all
					owned_by = ROOT
				}
				east_java_area = {
					type = all
					owned_by = ROOT
				}
				central_java_area = {
					type = all
					owned_by = ROOT
				}
				west_java_area = {
					type = all
					owned_by = ROOT
				}
				surabaya_area = {
					type = all
					owned_by = ROOT
				}
				banten_area = {
					type = all
					owned_by = ROOT
				}
				central_sumatra_area = {
					type = all
					owned_by = ROOT
				}
				jambi_area = {
					type = all
					owned_by = ROOT
				}
				minangkabau_area = {
					type = all
					owned_by = ROOT
				}
				north_sumatra_area = {
					type = all
					owned_by = ROOT
				}
				south_sumatra_area = {
					type = all
					owned_by = ROOT
				}
				batak_area = {
					type = all
					owned_by = ROOT
				}
			}
		}
		effect = {
			custom_tooltip = PLB_every_highlighted_province
			tooltip = {
				add_province_modifier = {
					name = PLB_lord_of_three_worlds
					duration = -1
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							MSA_is_in_java = yes
							MSA_is_in_sumatra = yes
							MSA_is_in_malaya = yes
						}
					}
					add_province_modifier = {
						name = PLB_lord_of_three_worlds
						duration = -1
					}
				}
			}
			remove_country_modifier = PLB_heirs_of_malayu_defeated
			remove_country_modifier = PLB_heirs_of_langkasuka_defeated
			remove_country_modifier = PLB_heirs_of_tarumanagara_defeated
			add_country_modifier = {
				name = PLB_lord_of_three_worlds_global
				duration = -1
			}
		}
	}
	
	PLB_eastern_peripheries = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_sri_tri_buana }
		position = 8
		provinces_to_highlight = {
			MSA_is_in_sulawesi = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_sulawesi = yes
				value = 5
			}
		}
		effect = {
			add_country_modifier = { 
				name = PLB_the_spice_does_flow
				duration = 7300
			}
			641 = {
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 15
					key = PLB_the_spice_does_flow
				}
			}
		}
	}
}

PLB_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
	}
	has_country_shield = yes
	
	PLB_legacy_of_srivijaya = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_privateer_problem }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
			OR = {
				is_at_war = yes
				num_of_generals = 2
				army_size_percentage = 0.9
			}
		}
		effect = {
			add_mil_power = 50
			west_java_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			central_java_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			banten_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			central_sumatra_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			jambi_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			minangkabau_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			north_sumatra_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			south_sumatra_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			batak_area = {
				limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
	}
	
	PLB_malayu = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_legacy_of_srivijaya }
		position = 4
		provinces_to_highlight = {
			MSA_is_in_sumatra = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			2677 = {
				owned_by = ROOT
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_sumatra = yes
				value = 18
			}
		}
		effect = {
			add_country_modifier = {
				name = PLB_heirs_of_malayu_defeated
				duration = -1
			}
			MSA_claims_malaya = yes
		}
	}
	
	PLB_langkasuka = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_malayu }
		position = 6
		provinces_to_highlight = {
			MSA_is_in_malaya = yes
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_malaya = yes
				value = 10
			}
		}
		effect = {
			add_country_modifier = {
				name = PLB_heirs_of_langkasuka_defeated
				duration = -1
			}
		}
	}
}

PLB_missions_3_1 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
	}
	has_country_shield = yes
	
	PLB_privateer_problem = {
		icon = mission_riches_of_golconda
		required_missions = { }
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			if = {
				limit = {
					has_dlc = "Golden Century" #Can only become pirate and get the unique path if you have the DLC :/
				}
				OR = {
					has_reform = pirate_republic_reform
					is_year = 1446
				}
			}
			else = {
				#TODO: DLC ALTERNATIVE
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Golden Century" #Can only become pirate and get the unique path if you have the DLC :/
				}
				custom_tooltip = PLB_pirate_reward
				tooltip = {
					custom_tooltip = PLB_much_of_the_tree
					add_navy_tradition = 10
					add_country_modifier = {
						name = PLB_return_of_the_pirates
						duration = 9125
					}
				}
				custom_tooltip = PLB_non_pirate_reward
				tooltip = {
					add_mercantilism = 2
					add_country_modifier = {
						name = PLB_chinese_viceroyalty
						duration = 7300
					}
				}
				hidden_effect = {
					if = {
						limit = {
							has_reform = pirate_republic_reform
						}
						add_navy_tradition = 10
						add_country_modifier = {
							name = PLB_return_of_the_pirates
							duration = 9125
						}
						set_country_flag = PLB_pirate
						swap_non_generic_missions = yes
					}
					else = {
						add_mercantilism = 2
						add_country_modifier = {
							name = PLB_chinese_viceroyalty
							duration = 7300
						}
					}
				}
			}
		}
	}
}

PLB_missions_3_non_pirate = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		NOT = { has_country_flag = PLB_pirate }
	}
	has_country_shield = yes
	
	PLB_ming = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_privateer_problem }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
			if = {
				limit = {
					exists = MNG
					MNG = {
						is_emperor_of_china = yes
					}
				}
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
		}
		effect = {
		}
	}
	
	PLB_expedition = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_ming }
		position = 3
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
}

PLB_missions_3_pirate = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		has_country_flag = PLB_pirate
	}
	has_country_shield = yes
	
}

PLB_missions_3_2 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
	}
	has_country_shield = yes
	
	PLB_seas_never_conquered = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_malayu }
		position = 5
		provinces_to_highlight = {
			MSA_is_in_borneo = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_borneo = yes
				value = 12
			}
		}
		effect = {
			create_general = {
				tradition = 80
			}
		}
	}
	
	PLB_srivijaya = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_seas_never_conquered PLB_langkasuka }
		position = 7
		provinces_to_highlight = {
			MSA_malaya_pth = yes
		}
		trigger = {
			MSA_malaya_trigger = yes
		}
		effect = {
			MSA_malaya_effect = yes
		}
	}
}

PLB_missions_4_non_pirate = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		NOT = { has_country_flag = PLB_pirate }
	}
	has_country_shield = yes
	
	PLB_a_new_spice_route = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_privateer_problem PLB_ryukyu }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
	
	PLB_peppers_of_lampung = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_restore_palembang }
		position = 4
		provinces_to_highlight = {
			province_id = 623
			OR = {
				NOT = { has_production_building_trigger = yes }
				NOT = { development = 12 }
			}
		}
		trigger = {
			623 = {
				has_production_building_trigger = yes
				development = 12
			}
		}
		effect = {
			add_permanent_province_modifier = {
				name = lampung_pepper
				duration = -1
			}
			623 = {
				add_or_upgrade_production_building = yes
			}
		}
	}
	
	PLB_allying_the_natives = {
		icon = mission_riches_of_golconda
		required_missions = { }
		position = 5
		provinces_to_highlight = {
		}
		trigger = {
			MSA_orang_laut_trigger = yes
		}
		effect = {
			MSA_orang_laut_effect = yes
		}
	}
	
	PLB_control_the_seas = {
		icon = mission_look_west
		required_missions = { PLB_allying_the_natives }
		position = 6
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
	
	PLB_trade_superiority = {
		icon = mission_look_west
		required_missions = { PLB_control_the_seas PLB_malacca }
		position = 7
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
}

PLB_missions_4_pirate = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		has_country_flag = PLB_pirate
	}
	has_country_shield = yes
	
}

PLB_missions_5_1 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
	}
	has_country_shield = yes
	
	PLB_ryukyu = {
		icon = mission_riches_of_golconda
		required_missions = { }
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			if = {
				limit = { exists = RYU }
				has_opinion = {
					who = RYU
					value = 75
				}
			}
		}
		effect = {
		}
	}
}

PLB_missions_5_non_pirate = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		NOT = { has_country_flag = PLB_pirate }
	}
	has_country_shield = yes
	
	PLB_restore_palembang = {
		icon = mission_riches_of_golconda
		required_missions = { }
		position = 3
		provinces_to_highlight = {
			province_id = 622
		}
		trigger = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				622 = {
					owned_by = ROOT
					has_trade_building_trigger = yes
					province_has_center_of_trade_of_level = 2
				}
			}
			else = {
				622 = {
					owned_by = ROOT
					has_trade_building_trigger = yes
				}
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				622 = { add_or_upgrade_trade_building = yes }
			}
			else = {
				622 = { add_center_of_trade_level = 1 }
			}
			add_mercantilism = 3
		}
	}
	
	PLB_the_founding = {
		icon = mission_riches_of_golconda
		required_missions = { PLB_restore_palembang }
		position = 5
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
	
	PLB_malacca = {
		icon = mission_look_west
		required_missions = { PLB_allying_the_natives }
		position = 6
		provinces_to_highlight = {
		}
		trigger = {
		}
		effect = {
		}
	}
}

PLB_missions_5_pirate = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		MSA_is_tag = { tag = PLB }
		has_country_flag = PLB_pirate
	}
	has_country_shield = yes
	
}