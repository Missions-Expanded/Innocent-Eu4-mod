MAJ_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			NOT = { has_dlc = "Leviathan" }
			has_country_flag = use_missions_expanded_missions_instead_of_paradox
		}
		OR = {
			tag = MAJ
			AND = {
				tag = MAJ
				was_tag = MAJ
			}
		}
	}
	has_country_shield = yes

	MAJ_sunda = {
		icon = mnd_maj_sunda_relations
		required_missions = { MAJ_recover_strength }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = SUN
				}
			}
		}
		effect = {
		}
	}
	
	MAJ_naval_prowess = {
		icon = mission_coromandel_expansion
		required_missions = { }
		position = 3
		provinces_to_highlight = {
		}
		trigger = {
			num_of_light_ship = 10
			num_of_admirals = 1
		}
		effect = {
			add_country_modifier = {
				name = MAJ_shipbuilding
				duration = 9125
			}
			
			create_admiral = {
				tradition = 60
			}
		}
	}
	
	MAJ_secure_spice_trade = {
		icon = mission_mnd_maj_cloves
		required_missions = { MAJ_naval_prowess }
		position = 4
		provinces_to_highlight = {
		}
		trigger = {
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				trading_part = {
					trade_goods = nutmeg
					value = 0.25
				}
				trading_part = {
					trade_goods = cloves
					value = 0.25
				}
				trading_part = {
					trade_goods = vanilla
					value = 0.25
				}
			}
			else = {
				trading_part = {
					trade_goods = spices
					value = 0.25
				}
			}
		}
		effect = {
		}
	}
	
	MAJ_trade_links = {
		icon = mission_dominate_trade_in_aden
		required_missions = { MAJ_secure_spice_trade MAJ_javan_relevancy }
		position = 6
		provinces_to_highlight = {
		}
		trigger = {	
		}
		effect = {
		}
	}
	
	MAJ_mancanegara = {
		icon = mission_rice_field
		required_missions = { MAJ_blessed_fields }
		position = 7
		provinces_to_highlight = {
			OR = {
				area = east_java_area
				area = central_java_area
				area = surabaya_area
			}
		}
		trigger = {
			development_in_provinces = {
				OR = {
					area = east_java_area
					area = central_java_area
					area = surabaya_area
				}
				value = 400 
			}
		}
		effect = {
			custom_tooltip = MAJ_every_owned_province
			tooltip = {
				add_province_modifier = {
					name = MAJ_mancanegara_modifier
					duration = -1
				}
			}
			hidden_effect = {
				east_java_area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = MAJ_mancanegara_modifier
						duration = -1
					}
				}
				central_java_area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = MAJ_mancanegara_modifier
						duration = -1
					}
				}
				surabaya_area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = MAJ_mancanegara_modifier
						duration = -1
					}
				}
			}
		}
	}
}

MAJ_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			NOT = { has_dlc = "Leviathan" }
			has_country_flag = use_missions_expanded_missions_instead_of_paradox
		}
		OR = {
			tag = MAJ
			AND = {
				tag = MAJ
				was_tag = MAJ
			}
		}
	}
	has_country_shield = yes
	
	MAJ_recover_strength = {
		icon = mission_mnd_maj_end_disaster
		required_missions = { }
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			army_size = 14
		}
		effect = {
			
		}
	}
	
	MAJ_bedil = {
		icon = mission_gunpowder_warfare
		required_missions = { MAJ_recover_strength }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
			is_ahead_of_time_in_specific_tech = { type = mil }
			army_size = 25
			army_tradition = 40
			mil_tech = 6 #Arquebus
		}
		effect = {
			add_country_modifier = {
				name = MAJ_bedil
				duration = 7300
			}
			country_event = { id = ME_Majapahit_Events.101 } #Selling firearms (Malaccan Malays obtained those from Java)
		}
	}
	
	MAJ_cetbangs = {
		icon = mission_asian_cannon
		required_missions = { MAJ_bedil }
		position = 3
		provinces_to_highlight = {
		}
		trigger = {
			num_of_artillery = 6
			army_tradition = 60
		}
		effect = {
			add_country_modifier = {
				name = MAJ_cetbangs_modifier
				duration = 9125
			}
		}
	}
	
	MAJ_settling_nusa = {
		icon = mission_rein_in_the_velamas
		required_missions = { MAJ_naval_prowess }
		position = 4
		provinces_to_highlight = {
		}
		trigger = {
			num_of_light_ship = 20
		}
		effect = {
		}
	}
	
	MAJ_javan_relevancy = {
		icon = mission_renovate_kannauj
		required_missions = { }
		position = 5
		provinces_to_highlight = {
			province_has_center_of_trade_of_level = 1
			owned_by = ROOT
			NOT = { has_trade_building_trigger = yes }
		}
		trigger = {	
			OR = {
				power_projection = 15
				any_owned_province = {
					province_has_center_of_trade_of_level = 1
					has_trade_building_trigger = yes
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_back_in_business
				duration = 10950
			}
		}
	}
	
	MAJ_blessed_fields = {
		icon = mission_a_million_rice_fields
		required_missions = { MAJ_javan_relevancy }
		position = 6
		provinces_to_highlight = {
			has_terrain = grasslands
			MSA_is_in_java = yes
			OR = {
				NOT = { has_production_building_trigger = yes }
				NOT = { development = 10 }
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				has_terrain = grasslands
				MSA_is_in_java = yes
				has_production_building_trigger = yes
				development = 10
				value = 5
			}
		}
		effect = {
			custom_tooltip = MAJ_distribute_15_manpower
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				custom_tooltip = MAJ_rice_provs
			}
			else = {
				custom_tooltip = MAJ_provinces_fulfilling_triggers
			}
			tooltip = {
				add_province_modifier = {
					name = MAJ_rice_fields
					duration = 9125
				}
			}
			hidden_effect = {
				for = {
					amount = 15
					effect = "
						random_owned_province = {
							limit = {
								MSA_is_in_java = yes
							}
							add_base_manpower = 1
						}
					"
				}
				if = {
					limit = {
						is_expanded_mod_active = { mod = trade_goods }
					}
					east_java_area = {
						limit = { trade_goods = rice }
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					central_java_area = {
						limit = { trade_goods = rice }
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					west_java_area = {
						limit = { trade_goods = rice }
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					surabaya_area = {
						limit = { trade_goods = rice }
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					banten_area = {
						limit = { trade_goods = rice }
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
				}
				else = { #inefficient use of space but eh
					east_java_area = {
						limit = {
							has_production_building_trigger = yes
							development = 10
							has_terrain = grasslands
						}
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					central_java_area = {
						limit = {
							has_production_building_trigger = yes
							development = 10
							has_terrain = grasslands
						}
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					west_java_area = {
						limit = {
							has_production_building_trigger = yes
							development = 10
							has_terrain = grasslands
						}
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					surabaya_area = {
						limit = {
							has_production_building_trigger = yes
							development = 10
							has_terrain = grasslands
						}
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
					banten_area = {
						limit = {
							has_production_building_trigger = yes
							development = 10
							has_terrain = grasslands
						}
						add_province_modifier = {
							name = MAJ_rice_fields
							duration = 9125
						}
					}
				}
			}
		}
	}
	
	MAJ_negara_agung = {
		icon = mission_mnd_maj_negara_agung
		required_missions = { MAJ_blessed_fields }
		position = 7
		provinces_to_highlight = {
			is_capital_of = ROOT
			OR = {
				NOT = { development = 40 }
				NOT = { num_of_buildings_in_province = 5 }
			}
		}
		trigger = {
			capital_scope = {
				development = 40
				num_of_buildings_in_province = 5
			}
		}
		effect = {
			capital_scope = {	
				add_province_modifier = {
					name = MAJ_trowulan_rebuilt
					duration = -1
				}
			}
			add_adm_power = 100
			change_government_reform_progress = 25
		}
	}
}

MAJ_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			NOT = { has_dlc = "Leviathan" }
			has_country_flag = use_missions_expanded_missions_instead_of_paradox
		}
		OR = {
			tag = MAJ
			AND = {
				tag = MAJ
				was_tag = MAJ
			}
		}
	}
	has_country_shield = yes
	
	MAJ_great_works = {
		icon = mission_conquer_lower_burma_tau
		required_missions = { MAJ_candi }
		position = 2
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 2690
					if = {
						limit = { has_dlc = "Leviathan" }
						NOT = {
							has_great_project = {
								type = any
								tier = 1
							}
						}
					}
					else = {
						OR = {
							NOT = { development = 30 }
							NOT = { num_of_buildings_in_province = 4 }
						}
					}
				}
				#another one?
			}
		}
		trigger = {
			2690 = {
				if = {
					limit = { has_dlc = "Leviathan" }
					has_great_project = {
						type = any
						tier = 1
					}
				}
				else = {
					development = 30
					num_of_buildings_in_province = 4
				}
			}
			num_of_owned_provinces_with = {
				num_of_times_improved = 10
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					custom_trigger_tooltip = {
						tooltip = IS_PROSPEROUS
						is_prosperous = yes
					}
				}
				value = 5
			}
		}
		effect = {
			if = {
				limit = {
					has_dlc = "Leviathan"
				}
				2690 = {
					add_province_modifier = {
						name = MAJ_kotagede
						duration = -1
					}
				}
				custom_tooltip = MAJ_every_state_with_a_great_project
				tooltip = {
					add_province_modifier = {
						name = MAJ_great_power_surroundings
						duration = 9125
					}
				}
				hidden_effect = {
					every_owned_province = {
						limit = {
							area_for_scope_province = {
								has_great_project = {
									type = any
									tier = 0
								}
								owned_by = ROOT
							}
						}
						add_province_modifier = {
							name = MAJ_great_power_surroundings
							duration = 9125
						}
					}
				}
			}
			else = {
				add_country_modifier = {
					name = MAJ_monuments
					duration = 10950
				}
				add_prestige_or_monarch_power = { amount = 50 }
			}
		}
	}
	
	MAJ_borneo = {
		icon = mission_deccanis
		required_missions = { MAJ_gajah_madas_oath }
		position = 3
		provinces_to_highlight = {
			OR = {
				province_id = 638
				province_id = 639
			}
			NOT = { country_or_subject_holds = ROOT }
		}
		trigger = {	
			638 = { country_or_subject_holds = ROOT }
			639 = { country_or_subject_holds = ROOT }
		}
		effect = {
			MSA_claims_borneo = yes
			add_country_modifier = {
				name = MAJ_preserving_remaining_tributaries
				duration = 10950
			}
			
			create_general = { tradition = 60 }
		}
	}
	
	MAJ_berune = {
		icon = mission_mnd_khm_resurgence
		required_missions = { MAJ_borneo }
		position = 4
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 636
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				owned_by = BEI
			}
		}
		trigger = {
			636 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			OR = {
				NOT = { exists = BEI }
				BEI = { is_subject_of = ROOT }
				has_won_war_against = { who = BEI }
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_unruly_subject_defeated
				duration = -1
			}
		}
	}
	
	MAJ_tanjungnagara = {
		icon = mission_mnd_maj_rein_in_brunei
		required_missions = { MAJ_berune }
		position = 5
		provinces_to_highlight = {
			MSA_is_in_borneo = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_borneo = yes
				value = 18
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_strategic_island_secured
				duration = 7300
			}
			add_army_tradition_or_mil_power = { amount = 10 }
		}
	}
	
	MAJ_majapahit = {
		icon = mission_brahmin_administrators
		required_missions = { MAJ_tanjungnagara MAJ_strait }
		position = 7
		provinces_to_highlight = {
			MSA_malaya_pth = yes
		}
		trigger = {
			MSA_malaya_trigger = yes
		}
		effect = {
			custom_tooltip = MAJ_merge_modifiers
			hidden_effect = {
				remove_country_modifier = MAJ_temasik_defeated
				remove_country_modifier = MAJ_unruly_subject_defeated
				remove_country_modifier = MAJ_suvarnadvipa
				add_country_modifier = {
					name = MAJ_empire
					duration = -1
				}
			}
			MSA_malaya_effect = yes
		}
	}
}

MAJ_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			NOT = { has_dlc = "Leviathan" }
			has_country_flag = use_missions_expanded_missions_instead_of_paradox
		}
		OR = {
			tag = MAJ
			AND = {
				tag = MAJ
				was_tag = MAJ
			}
		}
	}
	has_country_shield = yes
	
	MAJ_candi = { #yum, candi!
		icon = mission_mnd_maj_candi_shrines
		required_missions = { }
		position = 1
		provinces_to_highlight = {
		}
		trigger = {
			num_of_owned_provinces_with = {
				has_tax_building_trigger = yes
				value = 5
			}
			capital_scope = {
				has_tax_building_trigger = yes
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_majapahit_architecture
				duration = 9125
			}
		}
	}
	
	MAJ_gajah_madas_oath = {
		icon = mission_mnd_maj_gaja_madas_oath
		required_missions = { }
		position = 2
		provinces_to_highlight = {
		}
		trigger = {
			OR = {
				land_forcelimit = 20
				custom_trigger_tooltip = {
					tooltip = MAJ_is_no_longer_in_disaster
					OR = {
						has_country_flag = MAJ_resolved_disaster
						calc_true_if = {
							AND = {
								has_country_flag = MAJ_resolved_monetary_issues
								has_country_flag = MAJ_resolved_adipati
								has_country_flag = MAJ_resolved_trade
								has_country_flag = MAJ_resolved_faith_in_throne
							}
							amount = 2
						}
					}
				}
			}
		}
		effect = {
			set_country_flag = MAJ_palapa_campaigns_cb
			custom_tooltip = MAJ_palapa_campaigns_cb
			add_country_modifier = {
				name = MAJ_we_will_taste_spice
				duration = -1
				desc = MAJ_until_end_of_discovery
			}
			MSA_claims_sulawesi = yes
			kutai_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			banjar_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kalimantan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			minangkabau_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_sumatra_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			jambi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	MAJ_tributaries = {
		icon = mission_mnd_khm_protect_the_cham
		required_missions = { MAJ_gajah_madas_oath }
		position = 4
		provinces_to_highlight = {
			MSA_is_in_sumatra = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			622 = { country_or_non_sovereign_subject_holds = ROOT }
			OR = {
				num_of_subjects = 5
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					MSA_is_in_sumatra = yes
					value = 5
				}
			}
		}
		effect = {
			MSA_claims_sumatra = yes
			MSA_claims_malaya = yes
			
			custom_tooltip = MAJ_for_every_tributary
			hidden_effect = {
				if = {
					limit = {
						tributary_state = 5
					}
					add_adm_power = 100
					add_dip_power = 100
					add_mil_power = 100
				}
				else = {
					every_subject_country = {
						limit = {
							is_subject_of_type = tributary_state
						}
						add_adm_power = 20
						add_dip_power = 20
						add_mil_power = 20
					}
				}
			}
		}
	}
	
	MAJ_swarnadwipa = {
		icon = mission_entrepot_of_india
		required_missions = { MAJ_tributaries }
		position = 5
		provinces_to_highlight = {
			MSA_is_in_sumatra = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_sumatra = yes
				value = 11
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_suvarnadvipa
				duration = -1
			}
			
			add_years_of_income = 0.5
		}
	}
	
	MAJ_strait = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { MAJ_swarnadwipa MAJ_temasek }
		position = 6
		provinces_to_highlight = {
		}
		trigger = {
			navy_size = 40
			1361 = {
				trade_share = {
					country = ROOT
					share = 33
				}
			}
		}
		effect = {
		}
	}
}

MAJ_missions_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			NOT = { has_dlc = "Leviathan" }
			has_country_flag = use_missions_expanded_missions_instead_of_paradox
		}
		OR = {
			tag = MAJ
			AND = {
				tag = MAJ
				was_tag = MAJ
			}
		}
	}
	has_country_shield = yes
	
	MAJ_halt_the_spread = {
		icon = mission_mnd_maj_porch_of_mecca
		required_missions = { }
		position = 1
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { religion = ROOT }
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = MAJ_has_converted_5_provinces
				check_variable = { which = num_converted_religion value = 5 }
			}
			OR = {
				has_adm_advisor_2 = yes
				inquisitor = 1
			}
		}
		effect = {
		}
	}
	
	MAJ_shiva = {
		icon = mission_mnd_maj_enforce_loyalty
		required_missions = { MAJ_halt_the_spread MAJ_candi }
		position = 2
		provinces_to_highlight = {
			owner = {
				religion_group = muslim
			}
			OR = {
				region = indonesia_region
				region = malaya_region
			}
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = MAJ_less_than_25_provinces
				NOT = {
					calc_true_if = {
						indonesia_region = {
							type = all
							owner = {
								religion_group = muslim
							}
						}
						malaya_region = {
							type = all
							owner = {
								religion_group = muslim
							}
						}
						amount = 25
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = TEU_ttf_tooltip
				has_global_modifier_value = {
					which = tolerance_own
					value = 6 #this thing works but always shows up as +600.0% Tolerance of true faith
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_a_call_of_shiva
				duration = 9125
			}
			
			add_army_tradition_or_mil_power = { amount = 10 }
		}
	}
	
	MAJ_sakasanusa = {
		icon = mission_mnd_maj_subjugate_makassar
		required_missions = { MAJ_gajah_madas_oath }
		position = 3
		provinces_to_highlight = {
			MSA_is_in_sulawesi = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			641 = {
				country_or_non_sovereign_subject_holds = ROOT
			}num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_sulawesi = yes
				value = 4
			}
		}
		effect = {
			1357 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 25
					key = MAJ_pillar_island_control
				}
			}
			add_country_modifier  {
				name = MAJ_securing_important_territories
				duration = 10950
			}
			MSA_claims_spice_islands = yes
		}
	}
	
	MAJ_maluku = {
		icon = mission_mnd_maj_prepare_eastern_campaigns
		required_missions = { MAJ_sakasanusa }
		position = 4
		provinces_to_highlight = {
			OR = {
				province_id = 650
				province_id = 649
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			650 = { country_or_non_sovereign_subject_holds = ROOT }
			649 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		effect = {
			add_country_modifier = {
				name = MAJ_maluku_cloves
				duration = 9125
			}
			add_mercantilism = 2
			650 = {
				add_province_modifier = {
					name = MAJ_cloves
					duration = -1
				}
			}
			649 = {
				add_province_modifier = {
					name = MAJ_cloves
					duration = -1
				}
			}
		}
	}
	
	MAJ_temasek = {
		icon = me_mission_malay_ruler
		required_missions = { MAJ_tributaries }
		position = 5
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						province_id = 4815
						province_id = 596
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				owned_by = BEI
			}
		}
		trigger = {	
			4815 = { country_or_non_sovereign_subject_holds = ROOT }
			596 = { country_or_non_sovereign_subject_holds = ROOT }
			OR = {
				NOT = { exists = MLC }
				MLC = { is_subject_of = ROOT }
				has_won_war_against = { who = MLC }
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_temasik_defeated
				duration = -1
			}
		}
	}
	
	MAJ_hujung_medini = {
		icon = mission_found_udaipur
		required_missions = { MAJ_temasek }
		position = 7
		provinces_to_highlight = {
			MSA_is_in_malaya = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				MSA_is_in_malaya = yes
				value = 12
			}
		}
		effect = {
			add_country_modifier = {
				name = MAJ_verge_of_the_empire
				duration = 9125
			}
			country_event = { id = ME_Majapahit_Events.100 } 
		}
	}
}