namespace = ME_Qing_Events

####	MANCHU NO QING MISSION TRIGGERED	###
country_event = { #wokou pirates
	id = ME_Qing_Events.100
	title = ME_Qing_Events.100.T
	desc = ME_Qing_Events.100.D
	picture = WOKOU_INCIDENT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.100.OPT1
		add_country_modifier = {
			name = manchu_stayed_wokou
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.100.OPT2
		add_stability = 1
		1376 = {
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 20
				key = manchu_stayed_JAPAN_PIRATES
			}
		}
	}
}

country_event = { #conscript the Ronin
	id = ME_Qing_Events.101
	title = ME_Qing_Events.101.T
	desc = ME_Qing_Events.101.D
	picture = SENGOKU_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.101.OPT1
		add_yearly_manpower = 1.0
		add_country_modifier = {
			name = manchu_stayed_conscription_of_ronin
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.101.OPT2
		add_country_modifier = {
			name = manchu_stayed_reject_ronin
			duration = -1
		}
	}
}

country_event = { #conscript the ainu
	id = ME_Qing_Events.102
	title = ME_Qing_Events.102.T
	desc = ME_Qing_Events.102.D
	picture = SENGOKU_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.102.OPT1
		add_country_modifier = {
			name = manchu_stayed_conscription_of_ainu
			duration = -1
		}
	}
}

country_event = { #japanese eight banners
	id = ME_Qing_Events.103
	title = ME_Qing_Events.103.T
	desc = ME_Qing_Events.103.D
	picture = FIREARMS_INCIDENT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.103.OPT1
		add_mil_power = -400
		add_country_modifier = {
			name = manchu_stayed_japan_banners
			duration = -1
		}
	}

	option = {
		name = ME_Qing_Events.103.OPT2
		add_mil_power = 100
	}
}

country_event = { #colonial aspirations
	id = ME_Qing_Events.104
	title = ME_Qing_Events.104.T
	desc = ME_Qing_Events.104.D
	picture = TRIBUTARY_FLEET_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.104.OPT1
		add_country_modifier = {
			name = manchu_stayed_colonial_aspirations
			duration = -1
		}
		add_country_modifier = {
			name = manchu_stayed_colonial_aspirations_2
			duration = 9125
		}
	}
}

####	MISSION TRIGGERED EVENTS	###
####	MISSION TRIGGERED EVENTS	###
####	MISSION TRIGGERED EVENTS	###
#Translating the Manchu Tongue
country_event = {
	id = ME_Qing_Events.1
	title = ME_Qing_Events.1.T
	desc = ME_Qing_Events.1.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.1.OPT1
		KOR = {
			add_country_modifier = {
				name = qing_korea_subj
				duration = -1
			}
		}
	}
}

#Diplomacy with [1020.Owner.GetName]
country_event = {
	id = ME_Qing_Events.2
	title = ME_Qing_Events.2.T
	desc = ME_Qing_Events.2.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.2.OPT1
		trigger = {
			1020 = {
				owner = {
					OR = {
						isolationism = 0 #open doors
						isolationism = 1
						isolationism = 2 #adaptive
					}
				}
			}
		}
		if = {
			limit = {
				1020 = {
					owner = {
						owns_or_subject_of = 4182 #nagasaki
					}
				}
			}
			4182 = {
				add_province_modifier = {
					name = qing_nagasaki_trade_port
					duration = -1
				}
			}
		}
		else = {
			1020 = { #kyoto
				owner = { #shogun
					random_province = {					
						limit = {
							region = japan_region 
							country_or_vassal_holds = PREV
							has_port = yes
						}
						add_province_modifier = {
							name = qing_nagasaki_trade_port
							duration = -1
						}
					}
				}
			}
		}
		add_country_modifier = {
			name = qing_japan_silver
			duration = 18250
		}
	}
	option = {
		name = ME_Qing_Events.2.OPT2
		trigger = {
			1020 = {
				owner = {
					OR = {
						isolationism = 3 #isolated
						isolationism = 4
					}
				}
			}
		}
		if = {
			limit = {
				1020 = {
					owner = {
						owns_or_subject_of = 4182 #nagasaki
					}
				}
			}
			4182 = {
				add_province_modifier = {
					name = qing_nagasaki_trade_port_isolated
					duration = -1
				}
			}
		}
		else = {
			1020 = { #kyoto
				owner = { #shogun
					random_province = {					
						limit = {
							region = japan_region 
							country_or_vassal_holds = PREV
							has_port = yes
						}
						add_province_modifier = {
							name = qing_nagasaki_trade_port_isolated
							duration = -1
						}
					}
				}
			}
		}
		add_country_modifier = {
			name = qing_japan_silver
			duration = 18250
		}
	}

	option = {
		name = ME_Qing_Events.2.OPT3
		trigger = {
			1020 = {
				owner = {
					NOT = { religion = shinto }
				}
			}
		}
		1020 = {
			add_province_modifier = {
				name = qing_japan_embassy
				duration = -1
			}
		}
		add_country_modifier = {
			name = qing_japan_silver
			duration = 18250
		}
	}
}

#Burmese Military Frontier
country_event = {
	id = ME_Qing_Events.3
	title = ME_Qing_Events.3.T
	desc = ME_Qing_Events.3.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.3.OPT1
		
		burma_region = {
			limit = {
				owned_by = ROOT
			}
			add_core = SST
			cede_province = SST
		}
		create_march = SST
		burma_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = {  is_permanent_claim = ROOT }
			}
			add_permanent_claim = SST
			remove_claim = ROOT
		}
		SST = {
			add_country_modifier = {
				name = qing_shan_frontier
				duration = -1
			}
		}
	}

	option = {
		name = ME_Qing_Events.3.OPT2
		
		burma_region = {
			limit = {
				owned_by = ROOT
			}
			add_core = SST
			cede_province = SST
		}
		create_subject = {
			subject_type = tributary_state
			subject = SST
		}
		add_mandate = 5
	}

	option = {
		name = ME_Qing_Events.3.OPT3
		
		add_adm_power = 100
	}
}

#Invasion of Taiwan
country_event = {
	id = ME_Qing_Events.4
	title = ME_Qing_Events.4.T
	desc = ME_Qing_Events.4.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #matsu temple
		name = ME_Qing_Events.4.OPT1
		
		taiwan_area = {
			add_nationalism = -5
		}
		
		738 = {
			add_province_modifier = {
				name = qing_grand_matsu
				duration = -1
			}
		}
	}

	option = { #colonize taiwan
		name = ME_Qing_Events.4.OPT2
		
		# taiwan_area = {
			# add_siberian_construction = 100
		# }
		
		add_country_modifier = {
			name = qing_end_of_ming_loyalists
			duration = 9125
		}
	}
}

#Lifting the Seaban
country_event = {
	id = ME_Qing_Events.5
	title = ME_Qing_Events.5.T
	desc = ME_Qing_Events.5.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Qing_Events.5.OPT1
		657 = {
			custom_tooltip = qing_gets_custom_houses_tt
			add_province_triggered_modifier = qing_customs_province_modifier
		}
		659 = {
			custom_tooltip = qing_gets_custom_houses_tt
			add_province_triggered_modifier = qing_customs_province_modifier
		}
		2149 = {
			custom_tooltip = qing_gets_custom_houses_tt
			add_province_triggered_modifier = qing_customs_province_modifier
		}
		1822 = {
			custom_tooltip = qing_gets_custom_houses_tt
			center_of_trade = 2
			change_province_name = "Shanghai"
			rename_capital = "Shanghai"
			add_province_triggered_modifier = qing_customs_province_modifier
		}
	}
}

#Milk Tea and Gong Cha
country_event = {
	id = ME_Qing_Events.6
	title = ME_Qing_Events.6.T
	desc = ME_Qing_Events.6.D
	picture = COURT_eventPicture

	major = yes
	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		set_country_flag = gong_cha_flag
	}

	option = {
		name = ME_Qing_Events.6.OPT1
		
		change_price = {
			trade_goods = tea
			key = qing_gong_cha
			value = 0.10
			duration = -1
		}
		custom_tooltip = qing_milk_tea_tt
	}
}

#Proliferation of Opium
country_event = {
	id = ME_Qing_Events.7
	title = ME_Qing_Events.7.T
	desc = ME_Qing_Events.7.D
	picture = COURT_eventPicture

	major = yes
	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = qing_opiate_masses_proliferated
		hidden_effect = {
			set_variable = {
				which = opiumCounter
				value = 0
			}
		}
	}

	option = { #restrict domestic sales
		name = ME_Qing_Events.7.OPT1
		
		if = {
			limit = {
				is_expanded_mod_active = { mod = trade_goods }
			}
			change_price = {
				trade_goods = opium
				key = qing_opiate_masses_trade
				value = 0.50
				duration = -1
			}
		}
		
		set_country_flag = had_opium_epidemic #excludes Qing from opium epidemics
		
		random_list = {
			100 = {
				1334 = { #hormuz
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
			100 = {
				4346 = { #aden
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
			100 = {
				1340 = { #coromandel
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
		}
	}

	option = { #allow domestic sales
		name = ME_Qing_Events.7.OPT2
		
		if = {
			limit = {
				is_expanded_mod_active = { mod = trade_goods }
			}
			change_price = {
				trade_goods = opium
				key = qing_opiate_masses_trade
				value = 0.625
				duration = -1
			}
			random_owned_province = {
				limit = {
					trade_goods = opium
					has_building = plantations
				}
				add_province_modifier = {
					name = qing_imperial_opium_plantaions
					duration = -1
				}
			}
		}
		random_list = {
			100 = {
				1334 = { #hormuz
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
			100 = {
				4346 = { #aden
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
			100 = {
				1340 = { #coromandel
					random_trade_node_member_country = {
						set_country_flag = qing_opiate_masses_patient_zero
						country_event = {
							id = ME_Qing_Events.25
						}
					}
				}
			}
		}
	}
}

#Rule of the Dalai Lama
country_event = {
	id = ME_Qing_Events.8
	title = ME_Qing_Events.8.T
	desc = ME_Qing_Events.8.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #permanent vassal - panchen lama
		name = ME_Qing_Events.8.OPT1
		
		tibet_region = {
			add_core = TIB
			cede_province = TIB
		}
		TIB = {
			change_government = theocracy
			add_government_reform = leading_clergy_reform
			add_country_modifier = {
				name = qing_tibet_vassal
				duration = -1
			}
			if = {
				limit = {
					is_year = 1438
					NOT = { is_year = 1505 }
				}
				define_ruler = {
					name = "S�nam"
					dynasty = "Choklang"
				}
			}
			else_if = {
				limit = {
					is_year = 1505
					NOT = { is_year = 1568 }
				}
				define_ruler = {
					name = "Ensapa Lobsang"
					dynasty = "D�ndrup"
				}
			}
			else_if = {
				limit = {
					is_year = 1568 #1570
					NOT = { is_year = 1652 }
				}
				define_ruler = {
					name = "Lobsang Ch�kyi"
					dynasty = "Gyalsten"
				}
			}
			else_if = {
				limit = {
					is_year = 1652 #1653
					NOT = { is_year = 1737 }
				}
				define_ruler = {
					name = "Lobsang"
					dynasty = "Yeshe"
				}
			}
			else_if = {
				limit = {
					is_year = 1737 #1738
					NOT = { is_year = 1780 }
				}
				define_ruler = {
					name = "Lobsang Palden"
					dynasty = "Yeshe"
				}
			}
			else_if = {
				limit = {
					is_year = 1780 #1782
					NOT = { is_year = 1853 }
				}
				define_ruler = {
					name = "Palden Tenpai"
					dynasty = "Nyima"
				}
			}
		}
		vassalize = TIB
	}

	option = { #tributary - dalai lama
		name = ME_Qing_Events.8.OPT2
		trigger = {
			has_dlc = "Mandate of Heaven"
		}
		tibet_region = {
			add_core = TIB
			cede_province = TIB
		}
		TIB = {
			change_government = theocracy
			add_government_reform = leading_clergy_reform
			add_historical_friend = QNG
			if = {
				limit = {
					is_year = 1391
					NOT = { is_year = 1474 }
				}
				define_ruler = {
					name = "Gedun"
					dynasty = "Drub"
				}
			}
			else_if = {
				limit = {
					is_year = 1474 #1475
					NOT = { is_year = 1542 }
				}
				define_ruler = {
					name = "Gedun"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1542 #1543
					NOT = { is_year = 1588 }
				}
				define_ruler = {
					name = "Sonam"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1588 #1589
					NOT = { is_year = 1617 }
				}
				define_ruler = {
					name = "Yonten"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1617
					NOT = { is_year = 1682 }
				}
				define_ruler = {
					name = "Ngawang Lobsang"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1682 #1683
					NOT = { is_year = 1706 }
				}
				define_ruler = {
					name = "Tsangyang"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1706 #1708
					NOT = { is_year = 1757 }
				}
				define_ruler = {
					name = "Kelzang"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1757 #1758
					NOT = { is_year = 1804 }
				}
				define_ruler = {
					name = "Jamphel"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1804 #1805
					NOT = { is_year = 1815 }
				}
				define_ruler = {
					name = "Lungtok"
					dynasty = "Gyatso"
				}
			}
			else_if = {
				limit = {
					is_year = 1815 #1816
					NOT = { is_year = 1837 }
				}
				define_ruler = {
					name = "Tsultrim"
					dynasty = "Gyatso"
				}
			}
		}
		create_subject = {
			subject_type = tributary_state
			subject = TIB
		}
		677 = { #lhasa
			center_of_trade = 1
			add_permanent_province_modifier = {
				name = qing_lhasa
				duration = -1
			}
		}
		677 = { #tibet node
			add_trade_modifier = {
				who = ROOT
				duration = -1
				power = 25
				key = LAMA_LOYAL
			}
		}
	}

	option = { #direct administration
		name = ME_Qing_Events.8.OPT3
		
		add_adm_power = 100
		add_prestige = 10
	}
}

#Rule over the Basin
country_event = {
	id = ME_Qing_Events.9
	title = ME_Qing_Events.9.T
	desc = ME_Qing_Events.9.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #zunghar tributary
		name = ME_Qing_Events.9.OPT1
		trigger = {
			has_dlc = "Mandate of Heaven"
		}
		shanshan_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		tarim_basin_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		kashgaria_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		jetysuu_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		turpan_kumul_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		zungaria_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		north_zungaria = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		tannu_uriankhai_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		altai_sayan_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		create_subject = {
			subject_type = tributary_state
			subject = ZUN
		}
		ZUN = {
			change_primary_culture = oirats
			change_government = tribal
			add_government_reform = steppe_horde
			add_historical_friend = QNG
		}
		add_country_modifier = {
			name = qing_steppe_horses
			duration = -1
		}
	}

	option = { #zunghar vassal
		name = ME_Qing_Events.9.OPT2
		shanshan_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		tarim_basin_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		kashgaria_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		jetysuu_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		turpan_kumul_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		zungaria_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		north_zungaria = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		tannu_uriankhai_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		altai_sayan_area = {
			limit = {
				owned_by = ROOT
			}
			add_core = ZUN
			cede_province = ZUN
		}
		vassalize = ZUN
		ZUN = {
			change_primary_culture = oirats
			change_government = monarchy
		}
		central_asia_region = {
			limit = {
				NOT = { is_core = ZUN }
				NOT = { is_permanent_claim = ZUN }
			}
			add_claim = ZUN
		}
	}

	option = { #settle the basin
		name = ME_Qing_Events.9.OPT3
		
		shanshan_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture = ROOT }
			}
			add_culture_construction = {
				culture = ROOT
				speed = 1
				cost = 0
			}
		}
		tarim_basin_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture = ROOT }
			}
			add_culture_construction = {
				culture = ROOT
				speed = 1
				cost = 0
			}
		}
		kashgaria_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture = ROOT }
			}
			add_culture_construction = {
				culture = ROOT
				speed = 1
				cost = 0
			}
		}
	}
}

#State Monopoly on Salt
country_event = {
	id = ME_Qing_Events.10
	title = ME_Qing_Events.10.T
	desc = ME_Qing_Events.10.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #salt monopoly
		name = ME_Qing_Events.10.OPT1
		
		custom_tooltip = qing_salt_station_tt
		every_owned_province = {
			limit = {
				trade_goods = salt
			}
			add_province_triggered_modifier = qing_salt_stations
		}
	}
}

#Vietnamese Subjects
country_event = {
	id = ME_Qing_Events.11
	title = ME_Qing_Events.11.T
	desc = ME_Qing_Events.11.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #open Embassy
		name = ME_Qing_Events.11.OPT1
		
		add_treasury = -1500
		DAI = {
			add_country_modifier = {
				name = qing_dai_viet_tribute
				duration = -1
			}
		}
		add_country_modifier = {
			name = qing_dai_viet_diplo
			duration = 9125
		}
	}

	option = { #No Embassy
		name = ME_Qing_Events.11.OPT1
		
		add_country_modifier = {
			name = qing_dai_viet_diplo_lesser
			duration = 9125
		}
	}
}

#Treaty of Nerchinsk
country_event = {
	id = ME_Qing_Events.12
	title = ME_Qing_Events.12.T
	desc = ME_Qing_Events.12.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #fixed border
		name = ME_Qing_Events.12.OPT1
		
		add_truce_with = RUS
		add_mandate = -5
		country_event = {
			id = ME_Qing_Events.13
			days = 1642 #4 years + 6 months
			tooltip = qing_treaty_tt
		}
	}

	option = { #no treaty
		name = ME_Qing_Events.12.OPT2
		
		add_prestige = 10
		add_mandate = 5
	}
}

#Renewing the Treaty of Nerchinsk
country_event = {
	id = ME_Qing_Events.13
	title = ME_Qing_Events.13.T
	desc = ME_Qing_Events.13.D
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = { #renew
		name = ME_Qing_Events.13.OPT1
		
		add_truce_with = RUS
		country_event = {
			id = ME_Qing_Events.13
			days = 1642 #4 years + 6 months
			tooltip = qing_treaty_tt
		}
	}

	option = { #dont renew
		name = ME_Qing_Events.13.OPT2
		
		custom_tooltip = qing_no_renew
	}
}

#Importing Silver
country_event = {
	id = ME_Qing_Events.14
	title = ME_Qing_Events.14.T
	desc = ME_Qing_Events.14.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = { #market economy
		name = ME_Qing_Events.14.OPT1
		trigger = {
			has_country_flag = qing_inflate_flag
		}
		add_country_modifier = {
			name = qing_market_entrance
			duration = -1
		}
	}
	option = { #gov benefit
		name = ME_Qing_Events.14.OPT2
		trigger = {
			has_country_flag = qing_hold_flag
		}
		add_inflation = 5
		change_government_reform_progress = 10
		add_country_modifier = {
			name = qing_coin_hold
			duration = 18250
		}
	}
	option = { #transition to silver currency
		name = ME_Qing_Events.14.OPT3
		trigger = {
			has_country_flag = qing_deflate_flag
		}
		add_stability = 1
		add_country_modifier = {
			name = qing_coin_deflated
			duration = -1
		}
	}
}

####	OTHER STUFF		###
####	OTHER STUFF		###
####	OTHER STUFF		###
#Reform the Six Ministries
country_event = {
	id = ME_Qing_Events.15
	title = ME_Qing_Events.15.T
	desc = ME_Qing_Events.15.D
	picture = NEO_CONFUCIANISM_INCIDENT_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_variable = {
				which = reformChainProgress
				value = 0
			}
		}
	}

	option = {
		name = ME_Qing_Events.15.OPT1
		trigger = { 
			NOT = { has_country_flag = finished_personnel_event_chain_flag }
		}
		set_country_flag = reformed_ministry_personnel
		custom_tooltip = reformed_ministry_personnel_tooltip
	}

	option = {
		name = ME_Qing_Events.15.OPT2
		trigger = { 
			NOT = { has_country_flag = finished_revenue_event_chain_flag }
		}
		set_country_flag = reformed_ministry_revenue
		custom_tooltip = reformed_ministry_revenue_tooltip
	}

	option = {
		name = ME_Qing_Events.15.OPT3
		trigger = { 
			NOT = { has_country_flag = finished_rites_event_chain_flag }
		}
		set_country_flag = reformed_ministry_rites
		custom_tooltip = reformed_ministry_rites_tooltip
	}

	option = {
		name = ME_Qing_Events.15.OPT4
		trigger = { 
			NOT = { has_country_flag = finished_war_event_chain_flag }
		}
		set_country_flag = reformed_ministry_war
		custom_tooltip = reformed_ministry_war_tooltip
	}

	option = {
		name = ME_Qing_Events.15.OPT5
		trigger = { 
			NOT = { has_country_flag = finished_justice_event_chain_flag }
		}
		set_country_flag = reformed_ministry_justice
		custom_tooltip = reformed_ministry_justice_tooltip
	}

	option = {
		name = ME_Qing_Events.15.OPT6
		trigger = { 
			NOT = { has_country_flag = finished_works_event_chain_flag }
		}
		set_country_flag = reformed_ministry_works
		custom_tooltip = reformed_ministry_works_tooltip
	}
}

#New Regulations for the Ministry of Personnel
country_event = {
	id = ME_Qing_Events.16
	title = ME_Qing_Events.16.T
	desc = ME_Qing_Events.16.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_personnel
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = {
		name = ME_Qing_Events.16.OPT1
		add_meritocracy = -15
		add_country_modifier = {
			name = qing_more_personnel
			duration = 9125
		}
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}

	option = {
		name = ME_Qing_Events.16.OPT2
		add_country_modifier = {
			name = qing_less_personnel
			duration = 9125
		}
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}
}

#Qing Governors and Their Provinces : The Evolution of Territorial Administration in China, 1644-1796

#Guy, R. Kent, 1948

#pg. 61-65
#Compiling the Kai Lie
country_event = {
	id = ME_Qing_Events.17
	title = ME_Qing_Events.17.T
	desc = ME_Qing_Events.17.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_personnel
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = { #est. ranked lists
		name = ME_Qing_Events.17.OPT1
		add_country_modifier = {
			name = qing_ranked_lists
			duration = 18250
		}
		set_country_flag = qing_ranked_lists_flag
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}

	option = {#maintain ming practices
		name = ME_Qing_Events.17.OPT2
		add_stability = 1
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}
}

#pg97-100
#The Specialization of Posts
country_event = {
	id = ME_Qing_Events.18
	title = ME_Qing_Events.18.T
	desc = ME_Qing_Events.18.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_personnel
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = {
		name = ME_Qing_Events.18.OPT1
		set_country_flag = specialization_of_posts_flag
		custom_tooltip = "Provincial governors may find better ways of running their post..."
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}

	option = {
		name = ME_Qing_Events.18.OPT2
		add_country_modifier = {
			name = qing_standardization_of_governing
			duration = -1
		}
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_personnel
			set_country_flag = finished_personnel_event_chain_flag
			custom_tooltip =  completed_ministry_personnel_chain_tooltip
		}
	}
}

#Specialization of Posts in [Root.GetName]
province_event = {
	id = ME_Qing_Events.19
	title = ME_Qing_Events.19.T
	desc = ME_Qing_Events.19.D
	picture = COURT_eventPicture

	trigger = {
		owner = {
			has_country_flag = specialization_of_posts_flag
		}
		is_state = yes
		NOT = { has_province_modifier = qing_hinterland_province }
		NOT = { has_province_modifier = qing_agricultural_admin }
		NOT = { has_province_modifier = qing_trade_port_admin }
		NOT = { has_province_modifier = qing_urban_administration }
		NOT = { has_province_flag = qing_no_specialization }
	}

	mean_time_to_happen = {
		months = 180
	}

	option = { #hinterland administration
		name = ME_Qing_Events.19.OPT1
		trigger = {
			any_neighbor_province = {
				NOT = {
					owned_by = ROOT
				}
			}
		}
		add_province_modifier = {
			name = qing_hinterland_province #15% fort defense, 10 autonomy floor
			duration = -1
		}
	}

	option = { #agricultural administration
		name = ME_Qing_Events.19.OPT2
		trigger = {
			OR = {
				trade_goods = grain
				trade_goods = tea
				trade_goods = spices
				trade_goods = coffee
				trade_goods = cotton
				trade_goods = sugar
				trade_goods = tobacco
				trade_goods = cocoa
				#TGE goods
				trade_goods = palm_oil
				trade_goods = cinnamon
				trade_goods = saffron
				trade_goods = rice
				trade_goods = opium
				trade_goods = clove
				trade_goods = dates
				trade_goods = citrus
				trade_goods = maize	
			}
		}
		add_base_production = 1
		add_province_modifier = {
			name = qing_agricultural_admin #15% goods produced, 10 autonomy floor
			duration = -1
		}
	}

	option = { #trade ports
		name = ME_Qing_Events.19.OPT3
		trigger = {
			province_has_center_of_trade_of_level = 1
		}
		owner = {
			add_estate_loyalty = {
				estate = estate_burghers
				loyalty = 5
			}
		}
		add_province_modifier = {
			name = qing_trade_port_admin #25% province trade power, -10% ship build cost/speed local, 10 autonomy floor
			duration = -1
		}
	}

	option = { #urban focus
		name = ME_Qing_Events.19.OPT4
		add_base_tax = 1
		add_province_modifier = {
			name = qing_urban_administration #15% tax, -10% dev cost, 10 autonomy floor
			duration = -1
		}
	}

	option = { #skeleton crew
		name = ME_Qing_Events.19.OPT5
		trigger = {
			NOT = {
				development = 6
			}
		}
		owner = {
			add_country_modifier = {
				name = qing_skeleton_crew #-25% state maintenance
				duration = -1
			}
		}
		random_list = {
			33 = {
				add_base_tax = -1
			}
			33 = {
				add_base_production = -1
			}
			33 = {
				add_base_manpower = -1
			}
		}
		owner = {
			random_owned_province = {
				limit = {
					is_state = yes
					NOT = { has_province_modifier = qing_skeleton_crew }
				}
				random_list = {
					33 = {
						add_base_tax = 1
					}
					33 = {
						add_base_production = 1
					}
					33 = {
						add_base_manpower = 1
					}
				}
			}
		}
	}

	option = { #foreign religion
		name = ME_Qing_Events.19.h
		trigger = {
			NOT = {
				religion = confucianism
			}
		}
		if = {
			limit = {
				NOT = { has_tax_building_trigger = yes }
				num_free_building_slots = 1
			}
			add_or_upgrade_tax_building = yes
		}
		owner = {
			add_country_modifier = {
				name = qing_religious_posts #-25% construction cost, -0.1 devastation, 5 autonomy floor
				duration = -1
			}
		}
	}

	option = { #no changes
		name = ME_Qing_Events.19.OPT6
		hidden_effect = {
			set_province_flag = qing_no_specialization
		}
	}
}

# THE BOARD OF REVENUE IN NINETEENTH-CENTURY CHINA
# E-TU ZEN SUN
# pg. 224
#Matters of Coinage
country_event = {
	id = ME_Qing_Events.20
	title = ME_Qing_Events.20.T
	desc = ME_Qing_Events.20.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_revenue
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = { #inflate - will lead to a strengthening of market economy later on
		name = ME_Qing_Events.20.OPT1
		
		add_country_modifier = {
			name = qing_mint_inflate #+0.02 yrly inflation (2% inflation is considered healthy by modern economists)
			duration = 36500
		}
		set_country_flag = qing_inflate_flag
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #maintain - inflation spikes, later transition to silver currency will benefit the government more than the economy generally.
		name = ME_Qing_Events.20.OPT2
		
		add_stability = 1
		set_country_flag = qing_hold_flag
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #deflate - the later transition to silver coinage will be very smooth, high benefits for economy at large, fewer for gov.
		name = ME_Qing_Events.20.OPT3
		
		add_country_modifier = {
			name = qing_mint_deflate #+0.02% interest per annum (deflation is caused - among other things - by high interest rates, and also makes deb financing less equitable)
			duration = 36500
		}
		set_country_flag = qing_deflate_flag
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}
}

# THE BOARD OF REVENUE IN NINETEENTH-CENTURY CHINA
# E-TU ZEN SUN
# pg. 189
#Silks, Dyes, and Paper
country_event = {
	id = ME_Qing_Events.21
	title = ME_Qing_Events.21.T
	desc = ME_Qing_Events.21.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_revenue
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	#The Imperial Silk Factories of Kangxi in China, 1651-1722 A mirror for Louis XIV�s Royal Factories?
	#Li Wang
	#pg. 20

	option = { #fund both
		name = ME_Qing_Events.21.OPT1
		
		684 = { #hangzhou
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk #3 goods produced
				duration = -1
			}
		}
		1822 = { #suzhou
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk
				duration = -1
			}
		}
		1821 = { #nanjing
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk
				duration = -1
			}
		}
		
		1824 = { #wenzhou
			if = {
				limit = {
					NOT = { trade_goods = paper }
				}
				change_trade_goods = paper
			}
			add_province_modifier = {
				name = qing_wenzhou_paper
				duration = -1
			}
		}
		
		add_years_of_income = -4.5
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #fund silk
		name = ME_Qing_Events.21.OPT2
		
		684 = { #hangzhou
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk #3 goods produced
				duration = -1
			}
		}
		1822 = { #suzhou
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk
				duration = -1
			}
		}
		1821 = { #nanjing
			if = {
				limit = {
					NOT = { trade_goods = silk }
				}
				change_trade_goods = silk
			}
			add_province_modifier = {
				name = qing_imperial_silk
				duration = -1
			}
		}
		
		add_years_of_income = -3
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #fund paper
		name = ME_Qing_Events.21.OPT3
		
		1824 = { #wenzhou
			if = {
				limit = {
					NOT = { trade_goods = paper }
				}
				change_trade_goods = paper
			}
			add_province_modifier = {
				name = qing_wenzhou_paper
				duration = -1
			}
		}
		
		add_years_of_income = -2
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #fund NOTHING
		name = ME_Qing_Events.21.OPT4
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}
}

#The Board of Revenue in Nineteenth-Century China
# E-Tu Zen Sun
# pg. 199
#Implementing the Sheng-k'o
country_event = {
	id = ME_Qing_Events.22
	title = ME_Qing_Events.22.T
	desc = ME_Qing_Events.22.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_revenue
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = { #do it
		name = ME_Qing_Events.22.OPT1
		
		add_adm_power = -100
		add_years_of_income = -1
		every_owned_province = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = tea
					trade_goods = spices
					trade_goods = coffee
					trade_goods = cotton
					trade_goods = sugar
					trade_goods = tobacco
					trade_goods = cocoa
					#TGE goods
					trade_goods = palm_oil
					trade_goods = cinnamon
					trade_goods = saffron
					trade_goods = rice
					trade_goods = opium
					trade_goods = clove
					trade_goods = dates
					trade_goods = citrus
					trade_goods = maize	
				}
			}
			add_province_modifier = {
				name = qing_shengko
				duration = -1
			}
		}
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}

	option = { #different tax plan
		name = ME_Qing_Events.22.OPT1
		
		add_country_modifier = {
			name = qing_general_taxation
			duration = 36500
		}
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_revenue
			set_country_flag = finished_revenue_event_chain_flag
			custom_tooltip =  completed_ministry_revenue_chain_tooltip
		}
	}
}

#Costly Tributary Visits
country_event = {
	id = ME_Qing_Events.23
	title = ME_Qing_Events.23.T
	desc = ME_Qing_Events.23.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_rites
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = { #reduce visits
		name = ME_Qing_Events.23.OPT1
		
		add_country_modifier = {
			name = qing_less_tributes #+5 tax eff
			duration = 36500
		}
		
		every_subject_country = {
			limit = {
				is_subject_of_type = tributary_state
			}
			add_liberty_desire = -20
		}

		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_rites
			set_country_flag = finished_rites_event_chain_flag
			custom_tooltip =  completed_ministry_rites_chain_tooltip
		}
	}

	option = { #dont
		name = ME_Qing_Events.23.OPT2
		
		hidden_effect = {
			set_country_flag = qing_lavish_envoys
		}
		custom_tooltip = qing_sometimes_envoy_events
		
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_rites
			set_country_flag = finished_rites_event_chain_flag
			custom_tooltip =  completed_ministry_rites_chain_tooltip
		}
	}
}

#Popularization of Milk Tea
country_event = {
	id = ME_Qing_Events.24
	title = ME_Qing_Events.24.T
	desc = ME_Qing_Events.24.D
	picture = COURT_eventPicture

	major = yes
	fire_only_once = yes

	trigger = {
		mission_completed = qing_drink_choice
		had_country_flag = {
			flag = gong_cha_flag
			days = 3650
		}
		NOT = {
			has_country_flag = milk_tea_flag
		}
		any_country = {
			capital_scope = {
				continent = europe
			}
			any_owned_province = {
				OR = {
					region = north_china_region
					region = south_china_region
					region = xinan_region
					region = korea_region
					region = indo_china_region
					region = indonesia_region
					region = malaya_region
					region = manchuria_region
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		set_country_flag = milk_tea_flag
	}

	option = {
		name = ME_Qing_Events.24.OPT1
		change_price = {
			trade_goods = tea
			key = qing_milk_tea
			value = 0.25
			duration = -1
		}
	}
}

#Opium Epidemic in [Root.GetName]
country_event = {
	id = ME_Qing_Events.25
	title = ME_Qing_Events.25.T
	desc = ME_Qing_Events.25.D
	picture = COURT_eventPicture

	trigger = {
		#has_global_flag = trade_goods_exapanded_mod_active
		NOT = { has_country_flag = had_opium_epidemic }
		OR = {
			has_country_flag = qing_opiate_masses_patient_zero
			any_neighbor_country = {
				has_country_flag = had_opium_epidemic
			}
		}
	}

	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		set_country_flag = had_opium_epidemic
		hidden_effect = {
			change_variable = {
				which = opiumCounter
				value = 1
			}
		}
	}

	option = { #we have to do something about this!
		name = ME_Qing_Events.25.OPT1
		ai_chance = { factor = 50 }
		
		add_adm_power = -150
		add_country_modifier = {
			name = qing_opiate_masses_epidemic
			duration = 12775 #35 years
		}
	}

	option = { #harsh restrictions
		name = ME_Qing_Events.25.OPT2
		ai_chance = { factor = 50 }
		
		add_adm_power = -150
		add_mil_power = -150
		add_country_modifier = {
			name = qing_opiate_masses_epidemic
			duration = 9125 #25 years
		}
	}
}

#Global Opium Epidemic
country_event = {
	id = ME_Qing_Events.26
	title = ME_Qing_Events.26.T
	desc = ME_Qing_Events.26.D
	picture = COURT_eventPicture

	major = yes
	fire_only_once = yes

	trigger = {
		tag = QNG
		any_country = {
			capital_scope = {
				continent = europe
			}
			has_country_flag = had_opium_epidemic
		}
		any_country = {
			capital_scope = {
				continent = asia
			}
			has_country_flag = had_opium_epidemic
		}
		any_country = {
			capital_scope = {
				continent = africa
			}
			has_country_flag = had_opium_epidemic
		}
		check_variable = {
			which = opiumCounter
			value = 25
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_country_flag = had_opium_epidemic
		hidden_effect = {
			change_variable = {
				which = opiumCounter
				value = 1
			}
		}
	}

	option = { #oh dear.
		name = ME_Qing_Events.26.OPT1
		
		if = {
			limit = {
				is_expanded_mod_active = { mod = trade_goods }
			}
			change_price = {
				trade_goods = opium
				key = global_opium_epidemic
				value = -0.25
				duration = -1
			}
		}
		custom_tooltip = qing_global_opium
	}
}

#New Salt Stations in [Root.GetName]
province_event = { #salt monopoly - new salt stations
	id = ME_Qing_Events.27
	title = ME_Qing_Events.27.T
	desc = ME_Qing_Events.27.D
	picture = COURT_eventPicture

	trigger = {
		owner = {
			tag = QNG
			mission_completed = qing_reinstate_salt_monopoly
		}
		trade_goods = salt
		NOT = { has_province_modifier = qing_salt_stations }
	}

	mean_time_to_happen = {
		months = 12
	}

	option = { #new salt station
		name = ME_Qing_Events.27.OPT1
		
		custom_tooltip = qing_salt_station_tt2
		add_province_triggered_modifier = qing_salt_stations
	}
}

#Great Envoys from [qing_big_tribute_target.GetName]
country_event = {
	id = ME_Qing_Events.28
	title = ME_Qing_Events.28.T
	desc = ME_Qing_Events.28.D
	picture = COURT_eventPicture

	trigger = {
		tag = QNG
		has_country_flag = qing_lavish_envoys
	}

	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		random_subject_country = {
			limit = {
				is_subject_of_type = tributary_state
			}
			save_event_target_as = qing_big_tibute_target
		}
	}

	option = { #recieve them with full honors
		name = ME_Qing_Events.28.OPT1
		
		add_prestige = 5
		add_years_of_income = -0.15
		event_target:qing_big_tibute_target = {
			add_prestige = 10
			add_liberty_desire = -10
		}
		add_ruler_modifier = {
			name = qing_generous_host
			duration = -1
		}
	}

	option = { #no obligation
		name = ME_Qing_Events.28.OPT1
		
		add_prestige = -5
		
		event_target:qing_big_tibute_target = {
			add_prestige = 10
		}
	}
}

#Beginning of the High Qing Era
country_event = {
	id = ME_Qing_Events.29
	title = ME_Qing_Events.29.T
	desc = ME_Qing_Events.29.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_variable = {
				which = eraNameCounter
				value = 0
			}
		}
	}

	option = {
		name = ME_Qing_Events.29.OPT1
		
		add_ruler_modifier = {
			name = qing_kangxi_emperor #-5% power costs
			duration = -1
		}
		
		custom_tooltip = qing_regnal_titles
	}
}

####	FULL NO MISSION-TRIGGERD EVENTS		###
####	FULL NO MISSION-TRIGGERD EVENTS		###
####	FULL NO MISSION-TRIGGERD EVENTS		###
country_event = { #Huang Zongxi, Neo-Confucian Philosopher
	id = ME_Qing_Events.45
	title = ME_Qing_Events.45.T
	desc = ME_Qing_Events.45.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1610
		NOT = { is_year = 1695 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #take
		name = ME_Qing_Events.45.OPT1
		define_advisor = {
			type = philosopher
			name = "Huang Zongxi"
			skill = 3
			culture = wu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #no take
		name = ME_Qing_Events.45.OPT2
		add_mil_power = 15
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Gu Yanwu
	id = ME_Qing_Events.46
	title = ME_Qing_Events.46.T
	desc = ME_Qing_Events.46.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1610
		NOT = { is_year = 1695 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #take
		name = ME_Qing_Events.46.OPT1
		define_advisor = {
			type = philosopher
			name = "Gu Yanwu"
			skill = 3
			culture = wu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #no take
		name = ME_Qing_Events.46.OPT2
		add_prestige = -5
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Wang Fuzhi
	id = ME_Qing_Events.47
	title = ME_Qing_Events.47.T
	desc = ME_Qing_Events.47.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1620
		NOT = { is_year = 1695 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.47.OPT1
		define_advisor = {
			type = philosopher
			name = "Wang Fuzhi"
			skill = 3
			culture = xiang
			religion = confucianism
			cost_multiplier = 0.85
		}
		add_ruler_modifier = {
			name = QNG_materialist
			duration = -1
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.47.OPT2
		add_ruler_modifier = {
			name = QNG_neo_confucian
			duration = -1
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #3 great early qing philos
	id = ME_Qing_Events.48
	title = ME_Qing_Events.48.T
	desc = ME_Qing_Events.48.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1580
		NOT = { is_year = 1710 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.48.OPT1
		trigger = {
			is_year = 1630
			NOT = { is_year = 1710 }
		}
		define_advisor = {
			type = philosopher
			name = "Li Yong"
			skill = 3
			culture = xibei
			religion = confucianism
			cost_multiplier = 0.90
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.48.OPT2
		trigger = {
			is_year = 1580
			NOT = { is_year = 1680 }
		}
		define_advisor = {
			type = philosopher
			name = "Sun Qifeng"
			skill = 3
			culture = chihan
			religion = confucianism
			cost_multiplier = 0.90
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.48.OPT3
		trigger = {
			is_year = 1610
			NOT = { is_year = 1700 }
		}
		define_advisor = {
			type = philosopher
			name = "Huang Zongxi"
			skill = 3
			culture = wu
			religion = confucianism
			cost_multiplier = 0.90
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #yan yuan and li gong
	id = ME_Qing_Events.49
	title = ME_Qing_Events.49.T
	desc = ME_Qing_Events.49.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1630
		NOT = { is_year = 1730 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #yy
		name = ME_Qing_Events.49.OPT1
		trigger = {
			is_year = 1635
			NOT = { is_year = 1705 }
		}
		define_advisor = {
			type = philosopher
			name = "Yan Yuan"
			skill = 3
			culture = chihan
			religion = confucianism
			cost_multiplier = 0.80
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #lg
		name = ME_Qing_Events.49.OPT1
		trigger = {
			is_year = 1650
			NOT = { is_year = 1730 }
		}
		define_advisor = {
			type = philosopher
			name = "Li Gong"
			skill = 3
			culture = chihan
			religion = confucianism
			cost_multiplier = 0.80
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Hui Dong
	id = ME_Qing_Events.50
	title = ME_Qing_Events.50.T
	desc = ME_Qing_Events.50.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1700
		NOT = { is_year = 1760 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.50.OPT1
		define_advisor = {
			type = philosopher
			name = "Hui Dong"
			skill = 3
			culture = wu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Dai Zhen
	id = ME_Qing_Events.51
	title = ME_Qing_Events.51.T
	desc = ME_Qing_Events.51.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1725
		NOT = { is_year = 1780 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #
		name = ME_Qing_Events.51.OPT1
		define_advisor = {
			type = philosopher
			name = "Dai Zhen"
			skill = 3
			culture = jianghuai
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #bada shanren
	id = ME_Qing_Events.52
	title = ME_Qing_Events.52.T
	desc = ME_Qing_Events.52.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1630
		NOT = { is_year = 1710 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.52.OPT1
		define_advisor = {
			type = artist
			name = "Bada Shanren"
			skill = 5
			culture = chihan
			religion = confucianism
			cost_multiplier = 0.75
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #jiang tinxi
	id = ME_Qing_Events.53
	title = ME_Qing_Events.53.T
	desc = ME_Qing_Events.53.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1670
		NOT = { is_year = 1735 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.52.OPT1
		define_advisor = {
			type = artist
			name = "Jiang Tingxi"
			skill = 3
			culture = jianghuai
			religion = confucianism
			cost_multiplier = 0.95
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #shi tao
	id = ME_Qing_Events.54
	title = ME_Qing_Events.54.T
	desc = ME_Qing_Events.54.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1640
		NOT = { is_year = 1710 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.54.OPT1
		
		define_advisor = {
			type = artist
			name = "Shi Tao"
			skill = 3
			culture = zhuang
			religion = confucianism
			cost_multiplier = 0.85
		}
		add_prestige = -10
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = {
		name = ME_Qing_Events.54.OPT2
	}
}

country_event = { #Fuqing
	id = ME_Qing_Events.55
	title = ME_Qing_Events.55.T
	desc = ME_Qing_Events.55.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1690
		NOT = { is_year = 1750 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #staesman
		name = ME_Qing_Events.55.OPT1
		
		define_advisor = {
			type = statesman
			name = "Fuqing"
			skill = 2
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #general
		name = ME_Qing_Events.55.OPT2
		
		define_general = {
			name = "Fuqing"
			shock = 3
			fire = 3
			manuever = 0
			siege = 0
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #huang shujing
	id = ME_Qing_Events.56
	title = ME_Qing_Events.56.T
	desc = ME_Qing_Events.56.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1680
		NOT = { is_year = 1725 }
		taiwan_area = {
			type = all
			owned_by = ROOT
		}
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #staesman
		name = ME_Qing_Events.56.OPT1
		
		define_advisor = {
			type = statesman
			name = "Huang Shujing"
			skill = 3
			culture = chihan
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #staesman
		name = ME_Qing_Events.56.OPT2
		
		taiwan_area = {
			add_base_tax = 1
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Keying
	id = ME_Qing_Events.57
	title = ME_Qing_Events.57.T
	desc = ME_Qing_Events.57.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1780
		NOT = { is_year = 1860 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #statesman
		name = ME_Qing_Events.57.OPT1
		
		define_advisor = {
			type = statesman
			name = "Keying"
			skill = 3
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.90
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #statesman
		name = ME_Qing_Events.57.OPT1
		
		define_advisor = {
			type = diplomat
			name = "Keying"
			skill = 3
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.70
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Songgotu
	id = ME_Qing_Events.58
	title = ME_Qing_Events.58.T
	desc = ME_Qing_Events.58.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		mission_completed = QNG_russia
		is_year = 1640
		NOT = { is_year = 1700 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #statesman
		name = ME_Qing_Events.58.OPT1
		
		define_advisor = {
			type = statesman
			name = "Songgotu"
			skill = 5
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.75
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #diplomat
		name = ME_Qing_Events.58.OPT2
		
		define_advisor = {
			type = diplomat
			name = "Songgotu"
			skill = 3
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #tulisen
	id = ME_Qing_Events.59
	title = ME_Qing_Events.59.T
	desc = ME_Qing_Events.59.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		mission_completed = QNG_russia
		is_year = 1670
		NOT = { is_year = 1740 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #statesman
		name = ME_Qing_Events.59.OPT1
		
		define_advisor = {
			type = statesman
			name = "Tulisen"
			skill = 3
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #diplomat
		name = ME_Qing_Events.59.OPT2
		
		define_advisor = {
			type = diplomat
			name = "Tulisen"
			skill = 3
			culture = manchu
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Yang Fang
	id = ME_Qing_Events.60
	title = ME_Qing_Events.60.T
	desc = ME_Qing_Events.60.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1770
		NOT = { is_year = 1850 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #diplomat
		name = ME_Qing_Events.60.OPT1
		
		define_advisor = {
			type = diplomat
			name = "Yang Fang"
			skill = 3
			culture = miao
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #diplomat
		name = ME_Qing_Events.60.OPT2
		
		define_general = {
			name = "Yang Fang"
			shock = 2
			fire = 4
			manuever = 1
			siege = 0
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #diplomat
		name = ME_Qing_Events.60.OPT2
		
		define_advisor = {
			type = army_organiser
			name = "Yang Fang"
			skill = 3
			culture = miao
			religion = confucianism
			cost_multiplier = 0.85
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Thomas Pereira
	id = ME_Qing_Events.61
	title = ME_Qing_Events.61.T
	desc = ME_Qing_Events.61.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		mission_completed = QNG_russia
		is_year = 1645
		NOT = { is_year = 1710 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #scientist
		name = ME_Qing_Events.61.OPT1
		
		define_advisor = {
			type = diplomat
			name = "Thomas Pereria"
			skill = 3
			culture = portugese
			religion = catholic
			cost_multiplier = 0.80
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
	option = { #scientist
		name = ME_Qing_Events.61.OPT1
		
		define_advisor = {
			type = natural_scientist
			name = "Thomas Pereria"
			skill = 3
			culture = portugese
			religion = catholic
			cost_multiplier = 0.80
		}
		capital_scope = {
			add_province_modifier = {
				name = QNG_thomas_observatory
				duration = 3650
			}
		}
		change_innovativeness = 1
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Johann Schreck
	id = ME_Qing_Events.62
	title = ME_Qing_Events.62.T
	desc = ME_Qing_Events.62.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1580
		NOT = { is_year = 1630 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #scientist
		name = ME_Qing_Events.62.OPT1
		
		define_advisor = {
			type = natural_scientist
			name = "Johann Schreck"
			skill = 3
			culture = franconian
			religion = catholic
			cost_multiplier = 0.75
		}
		change_innovativeness = 1
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
	option = { #physician
		name = ME_Qing_Events.62.OPT1
		
		add_country_modifier = {
			name = QNG_schreck
			duration = 9125
		}
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #Minggatu
	id = ME_Qing_Events.63
	title = ME_Qing_Events.63.T
	desc = ME_Qing_Events.63.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1690
		NOT = { is_year = 1760 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #scientist
		name = ME_Qing_Events.63.OPT1
		
		define_advisor = {
			type = natural_scientist
			name = "Minggatu"
			skill = 3
			culture = mongol
			religion = confucianism
			cost_multiplier = 0.65
		}
		change_innovativeness = 1
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #ye tianshi
	id = ME_Qing_Events.64
	title = ME_Qing_Events.64.T
	desc = ME_Qing_Events.64.D
	picture = COURT_eventPicture

	fire_only_once = yes

	trigger = {
		mission_completed = QNG_advisors
		is_year = 1670
		NOT = { is_year = 1750 }
		had_country_flag = {
			flag = qing_ranked_lists_flag
			days = 2190
		}
	}

	mean_time_to_happen = {
		days = 18
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = qing_ranked_lists_flag
		}
	}

	option = { #scientist
		name = ME_Qing_Events.64.OPT1
		
		define_advisor = {
			type = natural_scientist
			name = "Ye Tianshi"
			skill = 2
			culture = wu
			religion = confucianism
			cost_multiplier = 0.70
		}
		change_innovativeness = 1
		hidden_effect = {
			set_country_flag = qing_ranked_lists_flag
		}
	}
}

country_event = { #choose regnal title
	id = ME_Qing_Events.65
	title = ME_Qing_Events.65.T
	desc = ME_Qing_Events.65.D
	picture = COURT_eventPicture

	trigger = {
		mission_completed = QNG_high_qing
		NOT = { has_era_name = yes }
		has_regency = no
		NOT = {
			check_variable = {
				which = eraNameCounter
				value = 28
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = eraNameCounter
				value = 1
			}
		}
		if = {
			limit = {
				NOT = {
					AND = {
						has_country_flag = qing_era_name_flag_1_used
						has_country_flag = qing_era_name_flag_2_used
						has_country_flag = qing_era_name_flag_3_used
						has_country_flag = qing_era_name_flag_4_used
						has_country_flag = qing_era_name_flag_5_used
						has_country_flag = qing_era_name_flag_6_used
						has_country_flag = qing_era_name_flag_7_used
					}
				}
			}
			while = {
				limit = {
					NOT = {
						OR = {
							AND = {
								has_country_flag = qing_era_name_flag_1
								NOT = { has_country_flag = qing_era_name_flag_1_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_2
								NOT = { has_country_flag = qing_era_name_flag_2_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_3
								NOT = { has_country_flag = qing_era_name_flag_3_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_4
								NOT = { has_country_flag = qing_era_name_flag_4_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_5
								NOT = { has_country_flag = qing_era_name_flag_5_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_6
								NOT = { has_country_flag = qing_era_name_flag_6_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_7
								NOT = { has_country_flag = qing_era_name_flag_7_used }
							}
						}
					}
				}
				random_list = { #adm pool
					100 = { set_country_flag = qing_era_name_flag_1 }
					100 = { set_country_flag = qing_era_name_flag_2 }
					100 = { set_country_flag = qing_era_name_flag_3 }
					100 = { set_country_flag = qing_era_name_flag_4 }
					100 = { set_country_flag = qing_era_name_flag_5 }
					100 = { set_country_flag = qing_era_name_flag_6 }
					100 = { set_country_flag = qing_era_name_flag_7 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					AND = {
						has_country_flag = qing_era_name_flag_8_used
						has_country_flag = qing_era_name_flag_9_used
						has_country_flag = qing_era_name_flag_10_used
						has_country_flag = qing_era_name_flag_11_used
						has_country_flag = qing_era_name_flag_12_used
						has_country_flag = qing_era_name_flag_13_used
						has_country_flag = qing_era_name_flag_14_used
					}
				}
			}
			while = {
				limit = {
					NOT = {
						OR = {
							AND = {
								has_country_flag = qing_era_name_flag_8
								NOT = { has_country_flag = qing_era_name_flag_8_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_9
								NOT = { has_country_flag = qing_era_name_flag_9_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_10
								NOT = { has_country_flag = qing_era_name_flag_10_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_11
								NOT = { has_country_flag = qing_era_name_flag_11_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_12
								NOT = { has_country_flag = qing_era_name_flag_12_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_13
								NOT = { has_country_flag = qing_era_name_flag_13_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_14
								NOT = { has_country_flag = qing_era_name_flag_14_used }
							}
						}
					}
				}
				random_list = { #dip pool
					100 = { set_country_flag = qing_era_name_flag_8 }
					100 = { set_country_flag = qing_era_name_flag_9 }
					100 = { set_country_flag = qing_era_name_flag_10 }
					100 = { set_country_flag = qing_era_name_flag_11 }
					100 = { set_country_flag = qing_era_name_flag_12 }
					100 = { set_country_flag = qing_era_name_flag_13 }
					100 = { set_country_flag = qing_era_name_flag_14 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					AND = {
						has_country_flag = qing_era_name_flag_15_used
						has_country_flag = qing_era_name_flag_16_used
						has_country_flag = qing_era_name_flag_17_used
						has_country_flag = qing_era_name_flag_18_used
						has_country_flag = qing_era_name_flag_19_used
						has_country_flag = qing_era_name_flag_20_used
						has_country_flag = qing_era_name_flag_21_used
					}
				}
			}
			while = {
				limit = {
					NOT = {
						OR = {
							AND = {
								has_country_flag = qing_era_name_flag_15
								NOT = { has_country_flag = qing_era_name_flag_15_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_16
								NOT = { has_country_flag = qing_era_name_flag_16_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_17
								NOT = { has_country_flag = qing_era_name_flag_17_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_18
								NOT = { has_country_flag = qing_era_name_flag_18_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_19
								NOT = { has_country_flag = qing_era_name_flag_19_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_20
								NOT = { has_country_flag = qing_era_name_flag_20_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_21
								NOT = { has_country_flag = qing_era_name_flag_21_used }
							}
						}
					}
				}
				random_list = { #mil pool
					100 = { set_country_flag = qing_era_name_flag_15 }
					100 = { set_country_flag = qing_era_name_flag_16 }
					100 = { set_country_flag = qing_era_name_flag_17 }
					100 = { set_country_flag = qing_era_name_flag_18 }
					100 = { set_country_flag = qing_era_name_flag_19 }
					100 = { set_country_flag = qing_era_name_flag_20 }
					100 = { set_country_flag = qing_era_name_flag_21 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					AND = {
						has_country_flag = qing_era_name_flag_22_used
						has_country_flag = qing_era_name_flag_23_used
						has_country_flag = qing_era_name_flag_24_used
						has_country_flag = qing_era_name_flag_25_used
						has_country_flag = qing_era_name_flag_26_used
						has_country_flag = qing_era_name_flag_27_used
						has_country_flag = qing_era_name_flag_28_used
					}
				}
			}
			while = {
				limit = {
					NOT = {
						OR = {
							AND = {
								has_country_flag = qing_era_name_flag_22
								NOT = { has_country_flag = qing_era_name_flag_22_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_23
								NOT = { has_country_flag = qing_era_name_flag_23_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_24
								NOT = { has_country_flag = qing_era_name_flag_24_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_25
								NOT = { has_country_flag = qing_era_name_flag_25_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_26
								NOT = { has_country_flag = qing_era_name_flag_26_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_27
								NOT = { has_country_flag = qing_era_name_flag_27_used }
							}
							AND = {
								has_country_flag = qing_era_name_flag_28
								NOT = { has_country_flag = qing_era_name_flag_28_used }
							}
						}
					}
				}
				random_list = { #wild pool
					100 = { set_country_flag = qing_era_name_flag_22 }
					100 = { set_country_flag = qing_era_name_flag_23 }
					100 = { set_country_flag = qing_era_name_flag_24 }
					100 = { set_country_flag = qing_era_name_flag_25 }
					100 = { set_country_flag = qing_era_name_flag_26 }
					100 = { set_country_flag = qing_era_name_flag_27 }
					100 = { set_country_flag = qing_era_name_flag_28 }
				}
			}
		}
	}

	#adm options
	option = {
		name = ME_Qing_Events.65.OPT1
		trigger = {
			has_country_flag = qing_era_name_flag_1
			NOT = { has_country_flag = qing_era_name_flag_1_used }
		}
		set_country_flag = qing_era_name_flag_1_used
		add_ruler_modifier = {
			name = QNG_era_name_xuantong #idk what this means
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT2
		trigger = {
			has_country_flag = qing_era_name_flag_2
			NOT = { has_country_flag = qing_era_name_flag_2_used }
		}
		set_country_flag = qing_era_name_flag_2_used
		add_ruler_modifier = {
			name = QNG_era_name_daoguang #idk what this means either
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT3
		trigger = { has_country_flag = qing_era_name_flag_3
			NOT = { has_country_flag = qing_era_name_flag_3_used }
		}
		set_country_flag = qing_era_name_flag_3_used
		add_ruler_modifier = {
			name = QNG_era_name_shunzhi #Smoothly-Ruling
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT4
		trigger = { has_country_flag = qing_era_name_flag_4
			NOT = { has_country_flag = qing_era_name_flag_4_used }
		}
		set_country_flag = qing_era_name_flag_4_used
		add_ruler_modifier = {
			name = QNG_era_name_yongli #perpetual calendar
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT5
		trigger = { has_country_flag = qing_era_name_flag_5
			NOT = { has_country_flag = qing_era_name_flag_5_used }
		}
		set_country_flag = qing_era_name_flag_5_used
		add_ruler_modifier = {
			name = QNG_era_name_yongchang #??
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT6
		trigger = { has_country_flag = qing_era_name_flag_6
			NOT = { has_country_flag = qing_era_name_flag_6_used }
		}
		set_country_flag = qing_era_name_flag_6_used
		add_ruler_modifier = {
			name = QNG_era_name_wanli #ten thousand calendars
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT7
		trigger = { has_country_flag = qing_era_name_flag_7
			NOT = { has_country_flag = qing_era_name_flag_7_used }
		}
		set_country_flag = qing_era_name_flag_7_used
		add_ruler_modifier = {
			name = QNG_era_name_hongzhi #great government
			duration = -1
		}
	}

	#dip options
	option = {
		name = ME_Qing_Events.65.OPT8
		trigger = { has_country_flag = qing_era_name_flag_8
			NOT = { has_country_flag = qing_era_name_flag_8_used }
		}
		set_country_flag = qing_era_name_flag_8_used
		add_ruler_modifier = {
			name = QNG_era_name_guagnxu #glorius succession
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT9
		trigger = { has_country_flag = qing_era_name_flag_9
			NOT = { has_country_flag = qing_era_name_flag_9_used }
		}
		set_country_flag = qing_era_name_flag_9_used
		add_ruler_modifier = {
			name = QNG_era_name_jiaqing #?
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT10
		trigger = { has_country_flag = qing_era_name_flag_10
			NOT = { has_country_flag = qing_era_name_flag_10_used }
		}
		set_country_flag = qing_era_name_flag_10_used
		add_ruler_modifier = {
			name = QNG_era_name_tiancong #heavenly wisdom
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT11
		trigger = { has_country_flag = qing_era_name_flag_11
			NOT = { has_country_flag = qing_era_name_flag_11_used }
		}
		set_country_flag = qing_era_name_flag_11_used
		add_ruler_modifier = {
			name = QNG_era_name_shaowu #?
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT12
		trigger = { has_country_flag = qing_era_name_flag_12
			NOT = { has_country_flag = qing_era_name_flag_12_used }
		}
		set_country_flag = qing_era_name_flag_12_used
		add_ruler_modifier = {
			name = QNG_era_name_chongzhen #honorable and auspicious
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT13
		trigger = { has_country_flag = qing_era_name_flag_13
			NOT = { has_country_flag = qing_era_name_flag_13_used }
		}
		set_country_flag = qing_era_name_flag_13_used
		add_ruler_modifier = {
			name = QNG_era_name_longqing #great celebration
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT14
		trigger = { has_country_flag = qing_era_name_flag_14
			NOT = { has_country_flag = qing_era_name_flag_14_used }
		}
		set_country_flag = qing_era_name_flag_14_used
		add_ruler_modifier = {
			name = QNG_era_name_jingtai #exhalted view
			duration = -1
		}
	}

	#mil options
	option = {
		name = ME_Qing_Events.65.OPT15
		trigger = { has_country_flag = qing_era_name_flag_15
			NOT = { has_country_flag = qing_era_name_flag_15_used }
		}
		set_country_flag = qing_era_name_flag_15_used
		add_ruler_modifier = {
			name = QNG_era_name_tongzhi #restore order together
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT16
		trigger = { has_country_flag = qing_era_name_flag_16
			NOT = { has_country_flag = qing_era_name_flag_16_used }
		}
		set_country_flag = qing_era_name_flag_16_used
		add_ruler_modifier = {
			name = QNG_era_name_qianlong #lasting eminence
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT17
		trigger = { has_country_flag = qing_era_name_flag_17
			NOT = { has_country_flag = qing_era_name_flag_17_used }
		}
		set_country_flag = qing_era_name_flag_17_used
		add_ruler_modifier = {
			name = QNG_era_name_chongde #lofty virtue
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT18
		trigger = { has_country_flag = qing_era_name_flag_18
			NOT = { has_country_flag = qing_era_name_flag_18_used }
		}
		set_country_flag = qing_era_name_flag_18_used
		add_ruler_modifier = {
			name = QNG_era_name_longwu #plentiful and martial
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT19
		trigger = { has_country_flag = qing_era_name_flag_19
			NOT = { has_country_flag = qing_era_name_flag_19_used }
		}
		set_country_flag = qing_era_name_flag_19_used
		add_ruler_modifier = {
			name = QNG_era_name_tianqi #heavenly opening
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT20
		trigger = { has_country_flag = qing_era_name_flag_20
			NOT = { has_country_flag = qing_era_name_flag_20_used }
		}
		set_country_flag = qing_era_name_flag_20_used
		add_ruler_modifier = {
			name = QNG_era_name_jiajing #admirable tranquility
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT21
		trigger = { has_country_flag = qing_era_name_flag_21
			NOT = { has_country_flag = qing_era_name_flag_21_used }
		}
		set_country_flag = qing_era_name_flag_21_used
		add_ruler_modifier = {
			name = QNG_era_name_tianshun #obedience to heaven
			duration = -1
		}
	}

	#wild card options
	option = {
		name = ME_Qing_Events.65.OPT22
		trigger = { has_country_flag = qing_era_name_flag_22
			NOT = { has_country_flag = qing_era_name_flag_22_used }
		}
		set_country_flag = qing_era_name_flag_22_used
		add_ruler_modifier = {
			name = QNG_era_name_xiangfeng #universal prosperity
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT23
		trigger = { has_country_flag = qing_era_name_flag_23
			NOT = { has_country_flag = qing_era_name_flag_23_used }
		}
		set_country_flag = qing_era_name_flag_23_used
		add_ruler_modifier = {
			name = QNG_era_name_yongzheng #harmonius justice
			duration = -1
		}
		change_dip = 2
	}
	option = {
		name = ME_Qing_Events.65.OPT24
		trigger = { has_country_flag = qing_era_name_flag_24
			NOT = { has_country_flag = qing_era_name_flag_24_used }
		}
		set_country_flag = qing_era_name_flag_24_used
		add_ruler_modifier = {
			name = QNG_era_name_tianming #The Emperor of Heaven's Mandate
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT25
		trigger = { has_country_flag = qing_era_name_flag_25
			NOT = { has_country_flag = qing_era_name_flag_25_used }
		}
		set_country_flag = qing_era_name_flag_25_used
		add_ruler_modifier = {
			name = QNG_era_name_hongguang #??
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT26
		trigger = { has_country_flag = qing_era_name_flag_26
			NOT = { has_country_flag = qing_era_name_flag_26_used }
		}
		set_country_flag = qing_era_name_flag_26_used
		add_ruler_modifier = {
			name = QNG_era_name_taichang #grand prosperity
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT27
		trigger = { has_country_flag = qing_era_name_flag_27
			NOT = { has_country_flag = qing_era_name_flag_27_used }
		}
		set_country_flag = qing_era_name_flag_27_used
		add_ruler_modifier = {
			name = QNG_era_name_zhengde #right virtue
			duration = -1
		}
	}
	option = {
		name = ME_Qing_Events.65.OPT28
		trigger = { has_country_flag = qing_era_name_flag_28
			NOT = { has_country_flag = qing_era_name_flag_28_used }
		}
		set_country_flag = qing_era_name_flag_28_used
		add_ruler_modifier = {
			name = QNG_era_name_chenghua #accomplished change
			duration = -1
		}
	}
}

#The Making of Qing Administrative Law
#
country_event = { #ministry of rites 3 - consult the huidan
	id = ME_Qing_Events.67
	title = ME_Qing_Events.67.T
	desc = ME_Qing_Events.67.D
	picture = COURT_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = reformed_ministry_rites
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			change_variable = {
				which = reformChainProgress
				value = 1
			}
		}
	}

	option = { #a
		name = ME_Qing_Events.67.OPT1
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_rites
			set_country_flag = finished_rites_event_chain_flag
			custom_tooltip =  completed_ministry_rites_chain_tooltip
		}
	}

	option = { #
		name = ME_Qing_Events.67.OPT2
		if = {
			limit = {
				check_variable = {
					which = reformChainProgress
					value = 3
				}
			}
			clr_country_flag = reformed_ministry_rites
			set_country_flag = finished_rites_event_chain_flag
			custom_tooltip =  completed_ministry_rites_chain_tooltip
		}
	}
}