namespace = ME_Austria_Events

# TODO: add pictures vara
country_event = {
	id = ME_Austria_Events.1
	title = ME_Austria_Events.1.t
	desc = ME_Austria_Events.1.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.1.a

		set_country_flag = me_hab_shadow_kingdom_peaceful
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				capital_scope = {
					region = italy_region
				}
			}
			add_opinion = {
				who = ROOT
				modifier = me_hab_shadow_kingdom_opinion
			}
		}
	}

	option = {
		name = ME_Austria_Events.1.b

		set_country_flag = me_hab_shadow_kingdom_military
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				capital_scope = {
					region = italy_region
				}
			}
			reverse_add_casus_belli = {
				target = ROOT
				type = cb_vassalize_mission
				months = 120
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.2
	title = ME_Austria_Events.2.t
	desc = ME_Austria_Events.2.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.2.a

		every_owned_province = {
			limit = {
				continent = europe
			}
			set_in_empire = yes
		}
	}
}

province_event = {
	id = ME_Austria_Events.3
	title = ME_Austria_Events.3.t
	desc = ME_Austria_Events.3.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.3.a

		add_province_modifier = {
			name = me_hab_bohemian_gold
			duration = -1
		}
		add_base_production = 4
	}
}

province_event = {
	id = ME_Austria_Events.4
	title = ME_Austria_Events.4.t
	desc = ME_Austria_Events.4.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.4.a

		carpathia_region = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		bohemia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		erzgebirge_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		moravia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		lusatia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.5
	title = ME_Austria_Events.5.t
	desc = ME_Austria_Events.5.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.5.a

		moldavia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		transylvania_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		southern_transylvania_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		wallachia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		vassalize = RMN
		RMN = {
			hidden_effect = {
				if = {
					limit = {
						NOT = { government = monarchy }
					}
					change_government = monarchy
					add_government_reform = feudalism_reform
				}
			}
			change_religion = ROOT
			define_ruler = {
				dynasty = ROOT
			}
		}
	}

	option = {
		name = ME_Austria_Events.5.b

		wallachia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_base_manpower = 1
			add_base_production = 1
			add_base_tax = 1
		}
		moldavia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_base_manpower = 1
			add_base_production = 1
			add_base_tax = 1
		}
	}
}

country_event = {
	id = ME_Austria_Events.6
	title = ME_Austria_Events.6.t
	desc = ME_Austria_Events.6.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.6.a

		add_country_modifier = {
			name = me_hab_eastern_roman_emperor
			duration = -1
		}
	}

	option = {
		name = ME_Austria_Events.6.b

		trigger = {
			is_emperor = yes
		}

		thrace_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			set_in_empire = yes
			cede_province = BYZ
			add_core = BYZ
			change_religion = ROOT
		}
		BYZ = {
			hidden_effect = {
				if = {
					limit = {
						NOT = { government = monarchy }
					}
					change_government = monarchy
					add_government_reform = feudalism_reform
				}
			}
			change_religion = ROOT
			define_ruler = {
				dynasty = ROOT
			}
			set_government_rank = 1
		}
		set_country_flag = me_hab_byzantium_in_hre
	}
}

country_event = {
	id = ME_Austria_Events.7
	title = ME_Austria_Events.7.t
	desc = ME_Austria_Events.7.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.7.a

		add_country_modifier = {
			name = me_hab_multicultural_empire
			duration = -1
		}
	}

	option = {
		name = ME_Austria_Events.7.b

		add_country_modifier = {
			name = me_hab_enforcement_of_culture
			duration = -1
		}
	}
}

country_event = {
	id = ME_Austria_Events.8
	title = ME_Austria_Events.8.t
	desc = ME_Austria_Events.8.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.8.a

		every_owned_province = {
			limit = {
				region = italy_region
			}
			add_province_modifier = {
				name = me_hab_kingdom_of_italy
				duration = 7300
			}
		}
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				capital_scope = {
					is_part_of_hre = yes
					region = italy_region
				}
			}
			add_country_modifier = {
				name = me_hab_subject_to_the_empire
				duration = 7300
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.9
	title = ME_Austria_Events.9.t
	desc = ME_Austria_Events.9.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.9.a

		266 = {
			add_province_modifier = {
				name = me_hab_beauty_of_the_realm
				duration = -1
			}
		}
	}

	option = {
		name = ME_Austria_Events.9.b

		153 = {
			add_province_modifier = {
				name = me_hab_a_second_capital
				duration = -1
			}
		}
	}

	option = {
		name = ME_Austria_Events.9.c

		131 = {
			add_province_modifier = {
				name = me_hab_the_southern_frontier
				duration = -1
			}
			create_or_add_center_of_trade_level = { level = 2 }
		}
	}

	option = {
		name = ME_Austria_Events.9.dd

		capital_scope = {
			add_base_manpower = 2
			add_base_production = 2
			add_base_tax = 2
		}
	}
}

# Ladislaus Postumus dies of Leukemia (copy of flavor_hun.2 with adaptations)
country_event = {
	id = ME_Austria_Events.10
	title = flavor_hun.201.name
	desc = {
		trigger = {
			has_ruler = "Ladislaus Postumus I"
			has_heir = no
		}
		desc = flavor_hun.201.d.king_no_heir
	}
	desc = {
		trigger = {
			has_ruler = "Ladislaus Postumus I"
			has_heir = yes
		}
		desc = flavor_hun.201.d.king
	}
	desc = {
		trigger = {
			has_heir = "Ladislaus Postumus"
		}
		desc = flavor_hun.201.d.heir
	}
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		set_country_flag = hun_has_had_matthias_corvinus_event
	}

	option = { #Heir dies, get Matyas
		name = flavor_hun.201.a
		ai_chance = { factor = 0.1 }

		remove_historical_friend = HAB
		HAB = { remove_historical_friend = HUN }
		kill_heir = { allow_new_heir = no }
		define_heir = {
			name = "Mátyás"
			culture = hungarian
			dynasty = "Hunyadi"
			adm = 4
			dip = 5
			mil = 6
			claim = 50
			birth_date = 1443.2.23
		}
		if = {
			limit = {
				has_dlc = "Rights of Man"
			}
			hidden_effect = { add_heir_personality_ancestor = { key = just } }
		}
		HAB = {
			tooltip = {
				add_casus_belli = {
					target = HUN
					type = cb_restore_personal_union
					months = 60
				}
			}
			hidden_effect = {
				country_event = { id = flavor_hun.10 days = 1 }
			}
		}
	}
	option = { #Ruler dies, keep his heir
		name = flavor_hun.201.b
		ai_chance = { factor = 0.1 }

	}
	option = { #Ruler dies with no heir, take a union
		name = flavor_hun.201.c
		ai_chance = { factor = 1 }

		add_stability_or_adm_power = yes
		HUN = {
			if = {
				limit = { senior_union_with = CRO }
				inherit = CRO
			}
		}
		HAB = {
			create_union = HUN
			hidden_effect = {
				country_event = { id = flavor_hun.3 days = 1 }
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.11
	title = ME_Austria_Events.11.t
	desc = ME_Austria_Events.11.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.11.a

		HUN = {
			add_liberty_desire = -100
		}

		#For easier integration of vassal
		transdanubia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
		alfold_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
		slovakia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
	}
}

country_event = {
	id = ME_Austria_Events.12
	title = ME_Austria_Events.12.t
	desc = ME_Austria_Events.12.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.12.a

		FROM = {
			country_event = { id = ME_Austria_Events.13 }
		}
		tooltip = {
			FROM = {
				add_country_modifier = {
					name = me_hab_crusade
					duration = -1
					desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
				}
				add_casus_belli = {
					target = TUR
					type = cb_order_crusade
					months = 120
				}
			}
		}
	}

	option = {
		name = ME_Austria_Events.12.b

		custom_tooltip = ME_HAB_WILL_JOIN_WAR
		set_country_flag = me_hab_pope_in_crusade
		FROM = {
			country_event = { id = ME_Austria_Events.14 }
		}
		tooltip = {
			FROM = {
				add_country_modifier = {
					name = me_hab_crusade
					duration = -1
					desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
				}
				add_casus_belli = {
					target = TUR
					type = cb_order_crusade
					months = 120
				}
			}
		}
	}

	option = {
		name = ME_Austria_Events.12.b

		FROM = {
			country_event = { id = ME_Austria_Events.15 }
		}
		tooltip = {
			FROM = {
				add_prestige = -5
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.13
	title = ME_Austria_Events.13.t
	desc = ME_Austria_Events.13.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.13.a

		add_casus_belli = {
			target = TUR
			type = cb_order_crusade
			months = 120
		}
		set_country_flag = HAB_cb_order_crusade_flag
		custom_tooltip = ME_cb_10
		tooltip = {
			add_country_modifier = {
				name = me_hab_crusade
				duration = -1
				desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.14
	title = ME_Austria_Events.14.t
	desc = ME_Austria_Events.14.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.14.a

		add_casus_belli = {
			target = TUR
			type = cb_order_crusade
			months = 120
		}
		set_country_flag = HAB_cb_order_crusade_flag
		custom_tooltip = ME_cb_10
		custom_tooltip = ME_HAB_WILL_JOIN_WAR
		tooltip = {
			add_country_modifier = {
				name = me_hab_crusade
				duration = -1
				desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.15
	title = ME_Austria_Events.15.t
	desc = ME_Austria_Events.15.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.15.a

		add_prestige = -5
	}
}

country_event = {
	id = ME_Austria_Events.16
	title = ME_Austria_Events.16.t
	desc = ME_Austria_Events.16.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.16.a

		add_estate_loyalty = {
			estate = all
			loyalty = 20
		}
		add_estate_influence_modifier = {
			estate = all
			desc = ME_HAB_DIET_AT_CAPITAL
			influence = -10
			duration = 7300
		}
		change_estate_land_share = {
			estate = all
			share = -20
		}
	}
}

country_event = { #The trouble at Styria and Tyrol
	id = ME_Austria_Events.17
	title = ME_Austria_Events.17.t
	desc = ME_Austria_Events.17.d

	fire_only_once = yes

	trigger = {
		is_year = 1450
		tag = HAB
		any_owned_province = {
			OR = {
				is_core = STY
				is_core = TIR
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = ME_Austria_Events.17.a #Take away their rights

		random_owned_province = {
			limit = {
				is_in_capital_area = yes
				is_core = STY
			}
			spawn_rebels = {
				type = nationalist_rebels
				size = 2
				friend = STY
			}
		}

		random_owned_province = {
			limit = {
				is_in_capital_area = yes
				is_core = TIR
			}
			spawn_rebels = {
				type = nationalist_rebels
				size = 2
				friend = TIR
			}
		}
		every_owned_province = {
			limit = {
				region = south_german_region
			}
			remove_core = STY
			remove_core = TIR
		}
	}

	option = {
		name = ME_Austria_Events.17.b #let them live for now

		add_prestige = -10
	}
}

country_event = {
	id = ME_Austria_Events.18
	title = ME_Austria_Events.18.t
	desc = ME_Austria_Events.18.d

	fire_only_once = yes
	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.18.a

		FROM = {
			add_imperial_influence = 10
			add_legitimacy_equivalent = { value = 10 republican_tradition = 3 }
			every_country = {
				limit = {
					NOT = { tag = FROM }
					capital_scope = {
						is_part_of_hre = yes
					}
				}
				add_opinion = {
					who = ROOT
					modifier = me_hab_imperial_authortiy
				}
			}
		}
	}

	option = {
		name = ME_Austria_Events.18.b

		FROM = {
			add_opinion = {
				who = ROOT
				modifier = me_hab_rejected_imperial_authority
			}
			add_casus_belli = {
				target = ROOT
				type = cb_insult
				months = 120
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.19
	title = ME_Austria_Events.19.t
	desc = ME_Austria_Events.19.d

	fire_only_once = yes
	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.19.a

		set_country_flag = me_hab_negative_occupation_of_rome
		custom_tooltip = me_hab_gain_6_pi_as_long_as_rome_is_controlled
		add_stability_or_adm_power = yes
		add_prestige_or_monarch_power = { amount = 25 }
	}
}

country_event = {
	id = ME_Austria_Events.20
	title = ME_Austria_Events.20.t
	desc = ME_Austria_Events.20.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.20.a

		poland_region = {
			limit = {
				culture = polish
				owned_by = ROOT
			}
			add_nationalism = -10
			add_local_autonomy = -20
		}
	}

	option = {
		name = ME_Austria_Events.20.b

		poland_region = {
			limit = {
				owned_by = ROOT
			}
			cede_province = POL
			add_core = POL
		}
		vassalize = POL
		set_country_flag = poland_vassal_triggered_modifier
		hidden_effect = {
			POL = {
				if = {
					limit = {
						NOT = { government = monarchy }
					}
					change_government = monarchy
					add_government_reform = feudalism_reform
				}
				change_religion = ROOT
				change_primary_culture = polish
			}
		}
	}

	option = {
		name = ME_Austria_Events.20.c

		trigger = {
			is_emperor = yes
		}

		if = {
			limit = {
				NOT = {
					exists = MAZ
				}
			}
			mazovia_area = {
				set_in_empire = yes
				cede_province = MAZ
				add_core = MAZ
			}
			hidden_effect = {
				MAZ = {
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
						add_government_reform = feudalism_reform
					}
					change_religion = ROOT
					change_primary_culture = polish
				}
			}
			MAZ = {
				define_ruler = {
					dynasty = "Piast"
				}
			}
		}
		else = {
			mazovia_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		if = {
			limit = {
				NOT = {
					exists = KRA
				}
			}
			malopolska_area = {
				set_in_empire = yes
				cede_province = KRA
				add_core = KRA
			}
			sandomierz_area = {
				set_in_empire = yes
				cede_province = KRA
				add_core = KRA
			}
			hidden_effect = {
				KRA = {
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
						add_government_reform = feudalism_reform
					}
					change_religion = ROOT
					change_primary_culture = polish
				}
			}
			KRA = {
				define_ruler = {
					dynasty = "Piast"
				}
			}
		}
		else = {
			malopolska_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
			sandomierz_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		if = {
			limit = {
				NOT = {
					exists = SIL
				}
			}
			silesia_area = {
				set_in_empire = yes
				cede_province = SIL
				add_core = SIL
			}
			hidden_effect = {
				SIL = {
					if = {
						limit = {
							NOT = { government = monarchy }
						}
						change_government = monarchy
						add_government_reform = feudalism_reform
					}
					change_religion = ROOT
					change_primary_culture = polish
				}
			}
			SIL = {
				define_ruler = {
					dynasty = "Piast"
				}
			}
		}
		else = {
			silesia_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		central_poland_area = {
			set_in_empire = yes
			cede_province = POL
			add_core = POL
		}
		wielkopolska_area = {
			set_in_empire = yes
			cede_province = POL
			add_core = POL
		}
		hidden_effect = {
			POL = {
				if = {
					limit = {
						NOT = { government = monarchy }
					}
					change_government = monarchy
					add_government_reform = feudalism_reform
				}
				change_religion = ROOT
				change_primary_culture = polish
			}
		}
		POL = {
			override_country_name = WIELKOPOLSKA
			define_ruler = {
				dynasty = "Piast"
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.21
	title = ME_Austria_Events.21.t
	desc = ME_Austria_Events.21.d
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.21.a

		73 = {
			add_permanent_province_modifier = {
				name = "hab_schwaz_mine"
				duration = -1
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.22
	title = ME_Austria_Events.22.t
	desc = ME_Austria_Events.22.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.22.a

		custom_tooltip = me_hab_ottomans_lose_cores
	}
}

country_event = {
	id = ME_Austria_Events.23
	title = ME_Austria_Events.23.t
	desc = ME_Austria_Events.23.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.23.a

		every_owned_province = {
			limit = {
				continent = europe
			}
			set_in_empire = yes
		}
	}

	option = {
		name = ME_Austria_Events.23.b

		FROM = {
			add_casus_belli = {
				target = ROOT
				type = cb_force_join_hre
				months = 120
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.24
	title = ME_Austria_Events.24.t
	desc = ME_Austria_Events.24.d

	is_triggered_only = yes

	trigger = {
		OR = {
			SPA = {
				dynasty = ROOT
			}
			AND = {
				NOT = { exists = SPA }
				CAS = {
					dynasty = ROOT
				}
			}
		}
	}

	option = {
		name = ME_Austria_Events.24.a

		if = {
			limit = {
				exists = SPA
			}
			SPA = {
				country_event = { id = ME_Austria_Events.25 }
			}
		}
		else = {
			CAS = {
				country_event = { id = ME_Austria_Events.25 }
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.25
	title = ME_Austria_Events.25.t
	desc = ME_Austria_Events.25.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.25.a

		ai_chance = { factor = 0.75 }

		FROM = {
			create_union = ROOT
		}
	}

	option = {
		name = ME_Austria_Events.25.b

		ai_chance = { factor = 0.25 }

		FROM = {
			add_casus_belli = {
				target = ROOT
				type = cb_restore_personal_union
				months = 120
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.26
	title = ME_Austria_Events.26.t
	desc = ME_Austria_Events.26.d

	major = yes
	fire_only_once = yes

	trigger = {
		tag = HAB
		OR = {
			SPA = {
				dynasty = ROOT
				senior_union_with = NAP
			}
			CAS = {
				dynasty = ROOT
				senior_union_with = NAP
			}
		}
	}

	option = {
		name = ME_Austria_Events.26.a

		ai_chance = { factor = 0.9 }

		if = {
			limit = {
				SPA = {
					dynasty = ROOT
					senior_union_with = NAP
				}
			}
			SPA = {
				country_event = { id = ME_Austria_Events.27 }
			}
		}
		else = {
			CAS = {
				country_event = { id = ME_Austria_Events.27 }
			}
		}
	}

	option = {
		name = ME_Austria_Events.26.b

		ai_chance = { factor = 0.1 }

		add_prestige_or_monarch_power = { amount = 10 }
	}
}

country_event = {
	id = ME_Austria_Events.27
	title = ME_Austria_Events.27.t
	desc = ME_Austria_Events.27.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.27.a

		ai_chance = { factor = 0.7 }

		if = {
			limit = {
				sicily_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			sicily_area = {
				cede_province = NAP
				add_core = NAP
			}
		}
		if = {
			limit = {
				western_sicily_area = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			western_sicily_area = {
				cede_province = NAP
				add_core = NAP
			}
		}
	}

	option = {
		name = ME_Austria_Events.27.b

		ai_chance = { factor = 0.3 }
	}
}

country_event = {
	id = ME_Austria_Events.28
	title = ME_Austria_Events.28.t
	desc = ME_Austria_Events.28.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.28.a

		ai_chance = { factor = 1 }

		join_all_offensive_wars_of = FROM
	}

	option = {
		name = ME_Austria_Events.28.b

		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = ME_Austria_Events.29
	title = ME_Austria_Events.29.t
	desc = ME_Austria_Events.29.d

	hidden = yes
	fire_only_once = yes
	trigger = {
		has_country_flag = HAB_cb_order_crusade_flag
		is_in_war = {
			participants = ROOT
			casus_belli = cb_order_crusade
		}
		exists = PAP
		PAP = {
			has_country_flag = me_hab_pope_in_crusade
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = ME_Austria_Events.29.a

		ai_chance = { factor = 1 }

		PAP = {
			country_event = { id = ME_Austria_Events.28 }
		}
	}
}

country_event = {
	id = ME_Austria_Events.30
	title = ME_Austria_Events.30.t
	desc = ME_Austria_Events.30.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.30.a

		ai_chance = {
			factor = 70
			modifier = {
				factor = 0
				is_emperor = yes
			}
			modifier = {
				factor = 0.5
				NOT = {
					has_opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						is_rival = FROM
						is_enemy = FROM
					}
				}
			}
		}

		change_religion = FROM
	}

	option = {
		name = ME_Austria_Events.30.b

		ai_chance = { factor = 0.30 }

		add_prestige = 10
	}
}

country_event = {
	id = ME_Austria_Events.31
	title = ME_Austria_Events.31.t
	desc = ME_Austria_Events.31.d

	trigger = {
		has_country_flag = me_hab_start_germanization
		culture_group = germanic
		NOT = {
			check_variable = {
				which = germanization
			    value = 10
			}
		}
	}

	mean_time_to_happen = {
		months = 100
	}

	option = {
		name = ME_Austria_Events.31.a

		ai_chance = { factor = 1 }

		random_owned_province = {
			limit = {
				NOT = { culture_group = ROOT }
				NOT = { has_province_modifier = me_hab_german_settlers }
			}
			change_culture = ROOT
			add_province_modifier = {
				name = me_hab_german_settlers
				duration = -1
			}
		}
		hidden_effect = {
			change_variable = {
				which = germanization
				value = 1
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.32
	title = ME_Austria_Events.32.t
	desc = ME_Austria_Events.32.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.32.a

		hidden_effect = {
			if = {
				limit = {
					HAB_can_take_glory_of_habsburg_trigger = yes
				}
				add_country_modifier = {
					name = me_hab_glory_of_habsburg
					duration = 10950
				}
				HAB_change_habsburg_glory = { amount = -30 }
			}
		}
		custom_tooltip = HAB_can_take_glory_of_habsburg_trigger_status
		tooltip = {
			add_country_modifier = {
				name = me_hab_glory_of_habsburg
				duration = 10950
			}
		}
	}

	option = {
		name = ME_Austria_Events.32.b

		hidden_effect = {
			if = {
				limit = {
					HAB_can_take_unshaken_reputation_trigger = yes
				}
				add_country_modifier = {
					name = me_hab_unshaken_reputation
					duration = 10950
				}
				HAB_change_habsburg_glory = { amount = -10 }
			}
		}
		custom_tooltip = HAB_can_take_unshaken_reputation_trigger_status
		tooltip = {
			add_country_modifier = {
				name = me_hab_unshaken_reputation
				duration = 10950
			}
		}
	}

	option = {
		name = ME_Austria_Events.32.c #Bailout

		custom_tooltip = ME_HAB_GLORY_EVENT_NOTHING_HAPPENS_TT
	}
}

country_event = {
	id = ME_Austria_Events.33
	title = ME_Austria_Events.33.t
	desc = ME_Austria_Events.33.d

	hidden = yes
	fire_only_once = yes

	trigger = {
		tag = HAB
		has_dlc = "Art of War"
		hre_leagues_enabled = yes
		OR = {
			in_league = protestant
			in_league = catholic
			is_emperor = yes
		}
	}

	option = {
		name = ME_Austria_Events.33.a

		if = {
			limit = {
				in_league = protestant
			}
			set_country_flag = me_hab_joined_protestants
		}
		else = {
			set_country_flag = me_hab_joined_catholics
		}
	}
}

country_event = {
	id = ME_Austria_Events.34
	title = ME_Austria_Events.34.t
	desc = ME_Austria_Events.34.d

	hidden = yes
	fire_only_once = yes

	trigger = {
		tag = HAB
		has_dlc = "Art of War"
		OR = {
			hre_religion_locked = yes
			hre_religion_treaty = yes
		}
	}

	option = {
		name = ME_Austria_Events.33.a

		if = {
			limit = {
				hre_religion_treaty = no
				OR = {
					AND = {
						has_country_flag = me_hab_joined_protestants
						hre_religion = protestant
					}
					AND = {
						has_country_flag = me_hab_joined_catholics
						hre_religion = catholic
					}
				}
			}
			HAB_change_habsburg_glory = { amount = 50 }
		}
		else_if = {
			limit = {
				hre_religion_treaty = no
				OR = {
					AND = {
						has_country_flag = me_hab_joined_catholics
						hre_religion = protestant
					}
					AND = {
						has_country_flag = me_hab_joined_protestants
						hre_religion = catholic
					}
				}
			}
			HAB_change_habsburg_glory = { amount = -70 }
		}
	}
}

country_event = {
	id = ME_Austria_Events.35
	title = ME_Austria_Events.35.t #don't worry about it...
	desc = ME_Austria_Events.35.d

	is_triggered_only = yes
	major = yes
	
	option = {
		name = ME_Austria_Events.35.a

		hidden_effect = {
			HAB_balkanize_poland_into_hre_effect = { Poland = ROOT }
		}
		custom_tooltip = HAB_victory_of_austria
	}
}

country_event = {
	id = ME_Austria_Events.36
	title = ME_Austria_Events.36.t
	desc = ME_Austria_Events.36.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.36.a

		custom_tooltip = HAB_habsburg_glory
		tooltip = {
			HAB_change_habsburg_glory = { amount = 10 }
		}
	}
}

country_event = {
	id = ME_Austria_Events.37
	title = ME_Austria_Events.37.t #What to do with Poland
	desc = ME_Austria_Events.37.d

	is_triggered_only = yes
	
	major = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					exists = PLC
				}
				PLC = { save_event_target_as = Austria_Poland }
			}
			else_if = {
				limit = {
					exists = POL
				}
				POL = { save_event_target_as = Austria_Poland }
			}
			else = {
				set_country_flag = HAB_POL_missing
			}
		}
	}
	option = {
		name = ME_Austria_Events.37.a

		trigger = {
			NOT = { has_country_flag = HAB_POL_missing }
		}
		
		ai_chance = { factor = 100 }
		
		add_casus_belli = {
			target = event_target:Austria_Poland
			type = cb_austria_balkanize_poland
			months = 10000
		}
		set_country_flag = HAB_may_balkanize_poland
		
		custom_tooltip = HAB_poland_balkanize_tt
	}
	
	option = {
		name = ME_Austria_Events.37.b
		
		ai_chance = { factor = 0 }
		
		ME_give_claims = { area = sandomierz_area }
		ME_give_claims = { area = malopolska_area }
		ME_give_claims = { area = red_ruthenia_area }
		
		set_country_flag = HAB_chose_to_conquer_poland
	}
	
	after = {
		clr_country_flag = HAB_POL_missing
	}
}

country_event = {
	id = ME_Austria_Events.37
	title = ME_Austria_Events.37.t #What to do with Poland
	desc = ME_Austria_Events.37.d

	is_triggered_only = yes
	
	major = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					exists = PLC
				}
				PLC = { save_event_target_as = Austria_Poland }
			}
			else_if = {
				limit = {
					exists = POL
				}
				POL = { save_event_target_as = Austria_Poland }
			}
			else = {
				set_country_flag = HAB_POL_missing
			}
		}
	}
	option = {
		name = ME_Austria_Events.37.a

		trigger = {
			NOT = { has_country_flag = HAB_POL_missing }
		}
		
		ai_chance = { factor = 100 }
		
		add_casus_belli = {
			target = event_target:Austria_Poland
			type = cb_austria_balkanize_poland
			months = 10000
		}
		set_country_flag = HAB_may_balkanize_poland
		
		custom_tooltip = HAB_poland_balkanize_tt
	}
	
	option = {
		name = ME_Austria_Events.37.b
		
		ai_chance = { factor = 0 }
		
		
	}
}

country_event = {
	id = ME_Austria_Events.38
	title = ME_Austria_Events.38.t #Bohemian stuff
	desc = ME_Austria_Events.38.d

	is_triggered_only = yes
	
	major = yes
	
	option = {
		name = ME_Austria_Events.38.a
		
		set_country_flag = ME_boh_pu_missions
		swap_non_generic_missions = yes
		add_country_modifier = {
			name = HAB_hussite_resistance
			duration = -1
		}
		add_country_modifier = {
			name = HAB_disloyal_nobility
			duration = -1
		}
		add_country_modifier = {
			name = HAB_fractured_military
			duration = -1
		}
		
		if = {
			limit = {
				GLG = {
					vassal_of = ROOT
				}
			}
			inherit = GLG
		}
		if = {
			limit = {
				OPL = {
					vassal_of = ROOT
				}
			}
			inherit = OPL
		}
	}
}

country_event = {
	id = ME_Austria_Events.39
	title = ME_Austria_Events.39.t #Timer
	desc = ME_Austria_Events.39.d

	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		check_variable = {
			which = timerVariable
			value = 1
		}
	}
	
	immediate = {
		subtract_variable = {
			which = timerVariable
			value = 1
		}
		country_event = { id = ME_Austria_Events.39 days = 31 }
	}
	
	option = {
		name = ME_Austria_Events.39.a
	}
}

country_event = {
	id = ME_Austria_Events.40
	title = ME_Austria_Events.40.t #Timer
	desc = ME_Austria_Events.40.d

	is_triggered_only = yes
	hidden = yes
	
	trigger = {
		check_variable = {
			which = placateTimerVariable
			value = 1
		}
	}
	
	immediate = {
		subtract_variable = {
			which = placateTimerVariable
			value = 1
		}
		country_event = { id = ME_Austria_Events.40 days = 31 }
	}
	
	option = {
		name = ME_Austria_Events.40.a
	}
}

country_event = {
	id = ME_Austria_Events.41
	title = ME_Austria_Events.41.t #Timer
	desc = ME_Austria_Events.41.d

	is_triggered_only = yes
	
	option = {
		name = ME_Austria_Events.41.a
	}
}