namespace = me_austria_missions

country_event = {
	id = me_austria_missions.1
	title = me_austria_missions.1.t
	desc = me_austria_missions.1.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.1.a
		
	trigger = {
		any_country = {
			capital_scope = {
				OR = {
					area = lower_swabia_area
					area = upper_swabia_area
				}
			}
			NOT = {
				tag = ROOT
				is_subject = yes
			}
		}
	}

		every_country = {
			limit = {
				capital_scope = {
					OR = {
						area = lower_swabia_area
						area = upper_swabia_area
					}
				}
				has_country_flag = me_hab_beaten_by_habsburgs
			}
			#fire the event
		}
		custom_tooltip = me_every_swabian_country
		tooltip = {
			vassalize = WUR
		}
		custom_tooltip = me_they_must_accept
		hidden_effect = {
			set_country_flag = me_hab_hre_path
			swap_non_generic_missions = yes
		}
		custom_tooltip = me_unlock_Imperial_branch
	}
	
	option = {
		name = me_austria_missions.1.b
		
		trigger = {
			lower_swabia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			upper_swabia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		lower_swabia_area = {
			cede_province = SWA
			add_core = SWA
		}
		upper_swabia_area = {
			cede_province = SWA
			add_core = SWA
		}
		vassalize = SWA
		hidden_effect = {
			set_country_flag = me_hab_hre_path
			swap_non_generic_missions = yes
		}
		custom_tooltip = me_unlock_Imperial_branch
	}

	option = {
		name = me_austria_missions.1.c
		
		add_country_modifier = {
			name = me_hab_german_ambitions
			duration = -1
			desc = me_UNTIL_WE_FORM_GERMANY
		}

		add_country_modifier = {
			name = me_hab_conquest_of_swabia
			duration = 10950
		}
		hidden_effect = {
			set_country_flag = me_hab_german_path
			swap_non_generic_missions = yes
		}
		custom_tooltip = me_unlock_german_branch
	}
}

country_event = {
	id = me_austria_missions.2
	title = me_austria_missions.2.t
	desc = me_austria_missions.2.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.2.a

		set_country_flag = me_hab_shadow_kingdom_peaceful
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				capital_scope = {
					region = italy_region
				}
			}
			add_opinion = {
				who = ROOT
				modifier = me_hab_shadow_kingdom_opinion
			}
		}
	}

	option = {
		name = me_austria_missions.2.b

		set_country_flag = me_hab_shadow_kingdom_military
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				is_part_of_hre = yes
				capital_scope = {
					region = italy_region
				}
			}
			reverse_add_casus_belli = {
				target = ROOT
				type = cb_vassalize_mission
				months = 120
			}
		}
	}
}

country_event = {
	id = me_austria_missions.3
	title = me_austria_missions.3.t
	desc = me_austria_missions.3.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.3.a

		add_treasury = -1000

		73 = {
			add_province_modifier = {
				name = me_hab_cheaper_armory
				duration = -1
			}
		}
		custom_tooltip = me_allow_armory_decisions
		set_country_flag = me_austrian_armory
	}

	option = {
		name = me_austria_missions.3.b

	}
}

country_event = {
	id = me_austria_missions.4
	title = me_austria_missions.4.t
	desc = me_austria_missions.4.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.4.a

		custom_tooltip = me_allow_for_italy_vassal
		set_country_flag = me_italy_vassal_creation

		if = {
			limit = {
				apulia_area = {
					type = all
					owner = {
						alliance_with = ROOT
					}
				}
				naples_area = {
					type = all
					owner = {
						alliance_with = ROOT
					}
				}
				calabria_area = {
					type = all
					owner = {
						alliance_with = ROOT
					}
				}
				western_sicily_area = {
					type = all
					owner = {
						alliance_with = ROOT
					}
				}
				sicily_area = {
					type = all
					owner = {
						alliance_with = ROOT
					}
				}
				120 = {
					owner = {
						alliance_with = ROOT
					}
				}
			}
		}
	}
}

country_event = {
	id = me_austria_missions.5
	title = me_austria_missions.5.t
	desc = me_austria_missions.5.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.5.a

		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				NOT = { legitimacy = 70 }
			}
		}
		create_general = { tradition = 100 add_shock = 1 }
		add_prestige = -25
		add_legitimacy = -25
	}
	option = {
		name = me_austria_missions.5.b
		ai_chance = {
			factor = 5
			modifier = {
				factor = 1.5
				NOT = { legitimacy = 70 }
			}
		}
		add_legitimacy = 25
	}
}

country_event = {
	id = me_austria_missions.6
	title = me_austria_missions.6.t
	desc = me_austria_missions.6.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.6.a

		#change government type
	}

	option = {
		name = me_austria_missions.6.b

		add_country_modifier = {
			name = me_hab_enlightened_ideas
			duration = -1
		}

		me_add_all_ruler_stats = { amount = 1 }
	}
}

country_event = {
	id = me_austria_missions.7
	title = me_austria_missions.7.t
	desc = me_austria_missions.7.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.7.a

		define_heir = {
			dynasty = ROOT
			name = "Charles"
			age = 1
			adm = 5
			dip = 5
			mil = 5
			claim = 75
			male = yes
		}
		set_heir_flag = me_charles_court
		custom_tooltip = me_hab_if_charles_becomes_ruler
		if = {
			limit = {
				exists = CAS
			}
			CAS = {
				country_event = { id = me_austria_missions.8 }
			}
		}
		else_if = {
			limit = {
				exists = SPA
			}
			SPA = {
				country_event = { id = me_austria_missions.8 }
			}
		}
	}
}

country_event = {
	id = me_austria_missions.8
	title = me_austria_missions.8.t
	desc = me_austria_missions.8.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.8.a

		define_heir = {
			dynasty = FROM
			culture = FROM
			religion = FROM
			name = "Charles"
			age = 1
			adm = 5
			dip = 5
			mil = 5
			claim = 75
			male = yes
		}
		set_heir_flag = me_charles_court
		custom_tooltip = me_if_charles_becomes_ruler
	}
}

country_event = {
	id = me_austria_missions.9
	title = me_austria_missions.9.t
	desc = me_austria_missions.9.d
	
	is_triggered_only = yes
	major = yes

	option = {
		name = me_austria_missions.9.a

		ai_chance = {
			factor = 0
		}

		FROM = {
			create_union = ROOT
		}
		add_liberty_desire = -50
	}

	option = {
		name = me_austria_missions.9.b

		ai_chance = {
			factor = 100
		}
		FROM = {
			add_casus_belli = {
				target = ROOT
				type = cb_hundred_years_union
				months = 30
			}
			custom_tooltip = me_will_last_30_months
		}
		add_legitimacy = -10
	}
}

country_event = {
	id = me_austria_missions.10
	title = me_austria_missions.10.t
	desc = me_austria_missions.10.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.10.a

		change_estate_land_share = {
			estate = all
			share = -15
		}
	}
}

country_event = {
	id = me_austria_missions.11
	title = me_austria_missions.11.t
	desc = me_austria_missions.11.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.11.a

		if = {
			limit = {
				BRA = {
					NOT = { vassal_of = ROOT }
				}
			}
			BRA = {
				country_event = { id = me_austria_missions.12 }
			}
		}
		custom_tooltip = me_if_brandenburg_is_our_vassal
		tooltip = {
			BRA = {
				add_country_modifier = {
					name = me_bra_new_march
					duration = -1
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					BRA = {
						vassal_of = ROOT
					}
				}
			BRA = {
				add_country_modifier = {
					name = me_bra_new_march
					duration = -1
				}
			}
		}
	}
}

country_event = {
	id = me_austria_missions.12
	title = me_austria_missions.12.t
	desc = me_austria_missions.12.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.12.a

		ai_chance = { factor = 1 }

		FROM = {
			vassalize = ROOT
		}
		white_peace = FROM

		add_country_modifier = {
			name = me_bra_new_march
			duration = -1
		}
	}

	option = {
		name = me_austria_missions.12.b

		ai_chance = { factor = 0 }

		add_prestige = -20
		add_legitimacy = -20
	}
}

country_event = {
	id = me_austria_missions.13
	title = me_austria_missions.13.t
	desc = me_austria_missions.13.d
	
	is_triggered_only = yes

	option = {
		name = me_austria_missions.13.a

		ai_chance = { factor = 1 }

		trigger = {
			NOT = {
				exists = PRU
			}
		}

		if = {
			limit = {
				religion = catholic
				NOT = {
					exists = TEU
				}
			}
			east_prussia_area = {
				limit = {
					owned_by = ROOT
				}
				cede_province = TEU
				add_core = TEU
			}
			west_prussia_area = {
				limit = {
					owned_by = ROOT
				}
				cede_province = TEU
				add_core = TEU
			}
			vassalize = TEU
		}
		else = {
			east_prussia_area = {
				limit = {
					owned_by = ROOT
				}
				cede_province = PRU
				add_core = PRU
			}
			west_prussia_area = {
				limit = {
					owned_by = ROOT
				}
				cede_province = PRU
				add_core = PRU
			}
			vassalize = PRU
		}
		set_country_flag = me_hab_merge_teu_bra
	}

	option = {
		name = me_austria_missions.13.b

		ai_chance = { factor = 0 }

		west_prussia_area = {
			limit = {
				owned_by = ROOT
			}
			add_local_autonomy = -100
			add_province_modifier = {
				name = me_hab_prussian_land
				duration = -1
			}
		}
		east_prussia_area = {
			limit = {
				owned_by = ROOT
			}
			add_local_autonomy = -100
			add_province_modifier = {
				name = me_hab_prussian_land
				duration = -1
			}
		}
	}
}

country_event = {
	id = me_austria_missions.14
	title = me_austria_missions.14.t
	desc = me_austria_missions.14.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.14.a
		
		#gib gov reform
	}
}

country_event = {
	id = me_austria_missions.15
	title = me_austria_missions.15.t
	desc = me_austria_missions.15.d
	
	is_triggered_only = yes
	
	option = {
		name = me_austria_missions.15.a
		
		trigger = {
			SER = {
				vassal_of = ROOT
			}
			BOS = {
				vassal_of = ROOT
				was_player = no
			}
		}

		SER = {
			inherit = BOS
		}
		SER = {
			add_country_modifier = {
				name = ME_hab_balkan_march
				duration = -1
			}
		}
	}

	option = {
		name = me_austria_missions.15.b

		set_country_flag = ME_can_use_belgrade_fortress
		custom_tooltip = ME_access_belgrade_fortress

		add_prestige_or_monarch_power = { amount = 20 }

	}
}

country_event = {
	id = me_austria_missions.16
	title = me_austria_missions.16.t
	desc = me_austria_missions.16.d

	is_triggered_only = yes
	major = yes

	option = {
		name = me_austria_missions.16.a

		add_country_modifier = {
			name = me_hab_eastern_roman_emperor
			duration = -1
		}
	}

	option = {
		name = me_austria_missions.16.b

		trigger = {
			is_emperor = yes
		}

		thrace_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			set_in_empire = yes
			cede_province = BYZ
			add_core = BYZ
			change_religion = ROOT
		}
		BYZ = {
			hidden_effect = {
				if = {
					limit = {
						NOT = { government = monarchy }
					}
					change_government = monarchy
					add_government_reform = feudalism_reform
				}
			}
			change_religion = ROOT
			define_ruler = {
				dynasty = ROOT
			}
			set_government_rank = 1
		}
		set_country_flag = me_hab_byzantium_in_hre
	}
}

country_event = {
	id = me_austria_missions.17
	title = me_austria_missions.17.t
	desc = me_austria_missions.17.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.17.a

		custom_tooltip = me_hab_for_as_long_as_burgundy_is_our_pu
		hidden_effect = {
			BUR = {
				remove_country_modifier = mary_is_on_the_throne #That way they may not inherit them by accident
			}
		}
		add_country_modifier = {
			name = me_hab_ties_in_burgundy
			duration = -1
		}
	}

	option = {
		name = me_austria_missions.17.b

		custom_tooltip = me_hab_for_as_long_as_burgundy_is_our_pu
		hidden_effect = {
			BUR = {
				remove_country_modifier = mary_is_on_the_throne
				add_country_modifier = {  #to prevent a bug
					name = mary_is_on_the_throne
					duration = -1
					hidden = yes
				}
			}
		}
		add_country_modifier = {
			name = me_hab_ties_in_burgundy
			duration = -1
		}
	}
}

country_event = {
	id = me_austria_missions.18
	title = me_austria_missions.18.t
	desc = me_austria_missions.18.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.18.a

		switzerland_area = {
			limit = {
				owned_by = ROOT
			}
			add_local_autonomy = -50
			add_nationalism = -10
		}
		romandie_area = {
			limit = {
				owned_by = ROOT
			}
			add_local_autonomy = -50
			add_nationalism = -10
		}
	}

	option = {
		name = me_austria_missions.18.b

		switzerland_area = {
			limit = {
				owned_by = ROOT
			}
			add_province_modifier = {
				name = me_hab_revenge_fulfilled
				duration = 7300
			}
		}
		romandie_area = {
			limit = {
				owned_by = ROOT
			}
			add_province_modifier = {
				name = me_hab_revenge_fulfilled
				duration = 7300
			}
		}
	}
}

country_event = {
	id = me_austria_missions.19
	title = me_austria_missions.19.t
	desc = me_austria_missions.19.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.19.a

		override_country_name = SOUTH_GERMAN_CONFEDERATION

		south_german_region = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_province_modifier = {
				name = me_hab_unity_of_the_confederation
				duration = -1
				desc = "until we form Germany"
			}
		}
	}

	option = {
		name = me_austria_missions.19.b

		add_country_modifier = {
			name = me_hab_austrian_led_confederation
			duration = -1
			desc = "until we form Germany"
		}
	}
}

country_event = {
	id = me_austria_missions.20
	title = me_austria_missions.20.t
	desc = me_austria_missions.20.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.20.a

		custom_tooltip = me_hab_unlocks_modern_navy_branch
		hidden_effect = {
			set_country_flag = me_hab_modern_navy
			swap_non_generic_missions = yes
		}
		define_advisor = {
			type = naval_reformer
			skill = 2
			culture = ROOT
			religion = ROOT
			cost_multiplier = 0.25
		}
	}

	option = {
		name = me_austria_missions.20.b

		trigger = {
			venetia_area = {
				type = all
				OR = {
					owned_by = ROOT
					province_id = 112
				}
			}
		}

		custom_tooltip = me_hab_unlocks_venetian_module_branch
		hidden_effect = {
			set_country_flag = me_hab_venetian_module
			swap_non_generic_missions = yes
		}
		random_owned_province = {
			limit = {
				area = venetia_area
			}
			add_unit_construction = {
				type = galley
				amount = 2
				speed = 0.5
				cost = 0
			}
		}
		random_owned_province = {
			limit = {
				area = venetia_area
			}
			add_unit_construction = {
				type = galley
				amount = 2
				speed = 0.5
				cost = 0
			}
		}
	}
}

country_event = {
	id = me_austria_missions.21
	title = me_austria_missions.21.t
	desc = me_austria_missions.21.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.21.a
		
	}
	
	option = {
		name = me_austria_missions.21.b
		
	}
	
	option = {
		name = me_austria_missions.21.b
		trigger = {
			is_emperor = yes
		}
		
	}
}

country_event = {
	id = me_austria_missions.22
	title = me_austria_missions.22.t
	desc = me_austria_missions.22.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.22.a
		
	}
	
	option = {
		name = me_austria_missions.22.b
		
	}
}

country_event = {
	id = me_austria_missions.23
	title = me_austria_missions.23.t
	desc = me_austria_missions.23.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.23.a
		
	}
	
	option = {
		name = me_austria_missions.23.b
		
	}
}

province_event = {
	id = me_austria_missions.24
	title = me_austria_missions.24.t
	desc = me_austria_missions.24.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.24.a
		
		add_province_modifier = {
			name = me_hab_bohemian_gold
			duration = -1
		}
	}
}

country_event = {
	id = me_austria_missions.25
	title = me_austria_missions.25.t
	desc = me_austria_missions.25.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.25.a
		
		custom_tooltip = me_hab_trigger_raabisation_revolts
		set_country_flag = me_hab_raabisation_flag
		define_advisor = {
			name = "Franz Anton von Raab"
			type = me_land_reformer
			skill = 3
			cost_multiplier = 0.10
			culture = ROOT
			religion = ROOT
		}
	}
	
	option = {
		name = me_austria_missions.25.b
		
		custom_tooltip = me_hab_trigger_no_raabisation_tt
		set_country_flag = me_hab_trigger_no_raabisation
	}
}

country_event = {
	id = me_austria_missions.26
	title = me_austria_missions.26.t
	desc = me_austria_missions.26.d

	is_triggered_only = yes

	option = {
		name = me_austria_missions.26.a
		custom_tooltip = me_hab_unlock_mainland_focus_branch
		hidden_effect = {
			set_country_flag = me_hab_mainland_development
			swap_non_generic_missions = yes
		}
	}
	
	option = {
		name = me_austria_missions.26.b
		
		custom_tooltip = me_hab_unlock_minorities_focus_branch
		hidden_effect = {
			set_country_flag = me_hab_minorities_branch
			swap_non_generic_missions = yes
		}
	}
}