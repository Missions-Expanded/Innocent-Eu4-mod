namespace = ME_Austria_Events

country_event = {
	id = ME_Austria_Events.1
	title = ME_Austria_Events.1.t
	desc = ME_Austria_Events.1.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.1.a
		set_country_flag = me_hab_shadow_kingdom_peaceful
	}

	option = {
		name = ME_Austria_Events.1.b
		set_country_flag = me_hab_shadow_kingdom_military
	}
}

country_event = {
	id = ME_Austria_Events.2
	title = ME_Austria_Events.2.t
	desc = ME_Austria_Events.2.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.2.a
		every_owned_province = {
			set_in_empire = yes
		}
	}
}

province_event = {
	id = ME_Austria_Events.3
	title = ME_Austria_Events.3.t
	desc = ME_Austria_Events.3.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.3.a
		
		add_province_modifier = {
			name = me_hab_bohemian_gold
			duration = -1
		}
		add_base_production = 4
	}
}

province_event = {
	id = ME_Austria_Events.4
	title = ME_Austria_Events.4.t
	desc = ME_Austria_Events.4.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.4.a
		
		carpathia_region = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		bohemia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		erzgebirge_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		moravia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
		lusatia_area = {
			limit = {
				owned_by = ROOT
				NOT = { culture_group  = ROOT }
			}
			add_province_modifier = {
				name = me_hab_local_officials
				duration = -1
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.5
	title = ME_Austria_Events.5.t
	desc = ME_Austria_Events.5.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.5.a

		moldavia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		transylvania_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		southern_transylvania_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		wallachia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			cede_province = RMN
			add_core = RMN
		}
		vassalize = RMN
		RMN = {
			change_religion = ROOT
			define_ruler = {
				dynasty = ROOT
			}
		}
	}

	option = {
		name = ME_Austria_Events.5.b

		wallachia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_base_manpower = 1
			add_base_production = 1
			add_base_tax = 1
		}
		moldavia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_base_manpower = 1
			add_base_production = 1
			add_base_tax = 1
		}
	}
}

country_event = {
	id = ME_Austria_Events.6
	title = ME_Austria_Events.6.t
	desc = ME_Austria_Events.6.d

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Austria_Events.6.a
		
		add_country_modifier = {
			name = me_hab_eastern_roman_emperor
			duration = -1
		}
	}
	option = {
		name = ME_Austria_Events.6.b
		
		trigger = {
			is_emperor = yes
		}

		thrace_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			set_in_empire = yes
			cede_province = BYZ
			add_core = BYZ
			change_religion = ROOT
		}
		BYZ = {
			change_religion = ROOT
			define_ruler = {
				dynasty = ROOT
			}
			set_government_rank = 1
		}
		set_country_flag = me_hab_byzantium_in_hre
	}
}

country_event = {
	id = ME_Austria_Events.7
	title = ME_Austria_Events.7.t
	desc = ME_Austria_Events.7.d

	is_triggered_only = yes
	
	option = {
		name = ME_Austria_Events.7.a

		add_country_modifier = {
			name = me_hab_multicultural_empire
			duration = -1
		}
	}

	option = {
		name = ME_Austria_Events.7.b

		add_country_modifier = {
			name = me_hab_enforcement_of_culture
			duration = -1
		}
	}
}

country_event = {
	id = ME_Austria_Events.8
	title = ME_Austria_Events.8.t
	desc = ME_Austria_Events.8.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.8.a

		every_owned_province = {
			limit = {
				region = italy_region
			}
			add_province_modifier = {
				name = me_hab_kingdom_of_italy
				duration = 7300
			}
		}
		every_country = {
			limit = {
				capital_scope = {
					is_part_of_hre = yes
					region = italy_region
				}
			}
			add_country_modifier = {
				name = me_hab_subject_to_the_empire
				duration = 7300
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.9
	title = ME_Austria_Events.9.t
	desc = ME_Austria_Events.9.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.9.a

		266 = {
			add_province_modifier = {
				name = me_hab_beauty_of_the_realm
				duration = -1
			}
		}
	}

	option = {
		name = ME_Austria_Events.9.b

		153 = {
			add_province_modifier = {
				name = me_hab_a_second_capital
				duration = -1
			}
		}
	}

	option = {
		name = ME_Austria_Events.9.c

		131 = {
			add_province_modifier = {
				name = me_hab_the_southern_frontier
				duration = -1
			}
			center_of_trade = 2
		}
	}

	option = {
		name = ME_Austria_Events.9.dd

		capital_scope = {
			add_base_manpower = 2
			add_base_production = 2
			add_base_tax = 2
		}
	}
}

# Ladislaus Postumus dies of Leukemia (copy of flavor_hun.2 with adaptations)
country_event = {
	id = ME_Austria_Events.10
	title = flavor_hun.201.name
	desc = {
		trigger = {
			has_ruler = "Ladislaus Postumus I"
			has_heir = no
		}
		desc = flavor_hun.201.d.king_no_heir
	}
	desc = {
		trigger = {
			has_ruler = "Ladislaus Postumus I"
			has_heir = yes
		}
		desc = flavor_hun.201.d.king
	}
	desc = {
		trigger = {
			has_heir = "Ladislaus Postumus"
		}
		desc = flavor_hun.201.d.heir
	}
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		set_country_flag = hun_has_had_matthias_corvinus_event
	}

	option = { #Heir dies, get Matyas
		name = flavor_hun.201.a
		ai_chance = { factor = 0.1 }

		remove_historical_friend = HAB
		HAB = { remove_historical_friend = HUN }
		kill_heir = { allow_new_heir = no }
		define_heir = {
			name = "Mátyás"
			culture = hungarian
			dynasty = "Hunyadi"
			adm = 4
			dip = 5
			mil = 6
			claim = 50
			birth_date = 1443.2.23
		}
		if = {
			limit = {
				has_dlc = "Rights of Man"
			}
			hidden_effect = { add_heir_personality_ancestor = { key = just } }
		}
		HAB = {
			tooltip = {
				add_casus_belli = {
					target = HUN
					type = cb_restore_personal_union
					months = 60
				}
			}
			hidden_effect = {
				country_event = { id = flavor_hun.10 days = 1 }
			}
		}
	}
	option = { #Ruler dies, keep his heir
		name = flavor_hun.201.b
		ai_chance = { factor = 0.1 }
		
		kill_ruler = yes
	}
	option = { #Ruler dies with no heir, take a union
		name = flavor_hun.201.c
		ai_chance = { factor = 1 }

		add_stability_or_adm_power = yes
		kill_ruler = yes
		HUN = {
			if = {
				limit = { senior_union_with = CRO }
				inherit = CRO
			}
		}
		HAB = {
			create_union = HUN
			hidden_effect = {
				country_event = { id = flavor_hun.3 days = 1 }
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.11
	title = ME_Austria_Events.11.t
	desc = ME_Austria_Events.11.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.11.a

		HUN = {
			add_liberty_desire = -100
		}

		#For easier integration of vassal
		transdanubia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
		alfold_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
		slovakia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = ROOT
		}
	}
}

country_event = {
	id = ME_Austria_Events.12
	title = ME_Austria_Events.12.t
	desc = ME_Austria_Events.12.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.12.a

		HAB = {
			country_event = { id = ME_Austria_Events.13 }
		}
		tooltip = {
			HAB = {
				add_country_modifier = { 
					name = me_hab_crusade
					duration = -1  
					desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
				}
			}
			#add CB here
		}
	}

	option = {
		name = ME_Austria_Events.12.b

		custom_tooltip = ME_HAB_WILL_JOIN_WAR
		set_country_flag = me_hab_pope_in_crusade

		HAB = {
			country_event = { id = ME_Austria_Events.14 }
		}
		tooltip = {
			HAB = {
				add_country_modifier = { 
					name = me_hab_crusade
					duration = -1  
					desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
				}
			}
			#add CB here
		}
	}

	option = {
		name = ME_Austria_Events.12.b

		HAB = {
			country_event = { id = ME_Austria_Events.15 }
		}
		tooltip = {
			HAB = {
				add_prestige = -5
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.13
	title = ME_Austria_Events.13.t
	desc = ME_Austria_Events.13.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.13.a

		#add CB here
		tooltip = {
			add_country_modifier = { 
				name = me_hab_crusade
				duration = -1  
				desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.14
	title = ME_Austria_Events.14.t
	desc = ME_Austria_Events.14.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.14.a

		#add CB here
		custom_tooltip = ME_HAB_WILL_JOIN_WAR
		tooltip = {
			add_country_modifier = { 
				name = me_hab_crusade
				duration = -1  
				desc = ME_HAB_LASTS_UNTIL_OTTOMAN_WAR_ENDS
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.15
	title = ME_Austria_Events.15.t
	desc = ME_Austria_Events.15.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.15.a

		add_prestige = -5
	}
}

country_event = {
	id = ME_Austria_Events.16
	title = ME_Austria_Events.16.t
	desc = ME_Austria_Events.16.d

	is_triggered_only = yes

	option = {
		name = ME_Austria_Events.16.a

		add_estate_loyalty = {
			estate = all
			loyalty = 20
		}
		add_estate_influence_modifier = {
			estate = all
			desc = ME_HAB_DIET_AT_CAPITAL
			influence = -10
			duration = 7300
		}
		change_estate_land_share = {
			estate = all
			share = -20
		}
	}
}

country_event = { #The trouble at Styria and Tyrol
	id = ME_Austria_Events.17
	title = ME_Austria_Events.17.t
	desc = ME_Austria_Events.17.d

	fire_only_once = yes

	
	option = {
		name = ME_Austria_Events.17.a #Take away their rights

		random_owned_province = {
			limit = {
				is_in_capital_area = yes
				is_core = STY
			}
			spawn_rebels = {
				type = nationalist_rebels
				size = 2
				friend = STY
			}
		}

		random_owned_province = {
			limit = {
				is_in_capital_area = yes
				is_core = TIR
			}
			spawn_rebels = {
				type = nationalist_rebels
				size = 2
				friend = TIR
			}
		}

		every_owned_province = {
			limit = {
				region = south_german_region
			}
			remove_core = STY
			remove_core = TIR
		}
	}

	option = {
		name = ME_Austria_Events.17.b #let them live for now

		add_prestige = -10
	}
}

country_event = {
	id = ME_Austria_Events.18
	title = ME_Austria_Events.18.t
	desc = ME_Austria_Events.18.d

	fire_only_once = yes
	is_triggered_only = yes
	major = yes
	
	option = {
		name = ME_Austria_Events.18.a

		FROM = {
			add_imperial_influence = 10
			add_legitimacy_equivalent = { value = 10 }
			every_country = {
				limit = {
					NOT = {
						tag = FROM
					}
					capital_scope = {
						is_part_of_hre = yes
					}
				}
				add_opinion = {
					who = ROOT
					modifier = me_hab_imperial_authortiy
				}
			}
		}
	}

	option = {
		name = ME_Austria_Events.18.b

		FROM = {
			add_opinion = {
				who = ROOT
				modifier = me_hab_rejected_imperial_authority
			}
			add_casus_belli = {
				target = ROOT
				type = cb_insult
				months = 120
			}
		}
	}
}

country_event = {
	id = ME_Austria_Events.19
	title = ME_Austria_Events.19.t
	desc = ME_Austria_Events.19.d

	fire_only_once = yes
	is_triggered_only = yes
	major = yes
	
	option = {
		name = ME_Austria_Events.19.a

	}
}

country_event = {
	id = ME_Austria_Events.20
	title = ME_Austria_Events.20.t
	desc = ME_Austria_Events.20.d

	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Austria_Events.20.a
		
		poland_region = {
			limit = {
				culture = polish
				owned_by = ROOT
			}
			add_nationalism = -10
			add_local_autonomy = -20
		}
	}
	
	option = {
		name = ME_Austria_Events.20.b
		
		poland_region = {
			limit = {
				owned_by = ROOT
			}
			cede_province = POL
			add_core = POL
		}
		vassalize = POL
		set_country_flag = poland_vassal_triggered_modifier
	}
	
	option = {
		name = ME_Austria_Events.20.c
		
		trigger = {
			is_emperor = yes
		}
		
		if = {
			limit = {
				NOT = {
					exists = MAZ
				}
			}
			mazovia_area = {
				set_in_empire = yes
				cede_province = MAZ
				add_core = MAZ
			}
		}
		else = {
			mazovia_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		
		if = {
			limit = {
				NOT = {
					exists = KRA
				}
			}
			malopolska_area = {
				set_in_empire = yes
				cede_province = KRA
				add_core = KRA
			}
			sandomierz_area = {
				set_in_empire = yes
				cede_province = KRA
				add_core = KRA
			}
		}

		else = {
			malopolska_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
			sandomierz_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		if = {
			limit = {
				NOT = {
					exists = SIL
				}
			}
			silesia_area = {
				set_in_empire = yes
				cede_province = SIL
				add_core = SIL
			}
		}
		
		else = {
			silesia_area = {
				set_in_empire = yes
				cede_province = POL
				add_core = POL
			}
		}
		central_poland_area = {
			set_in_empire = yes
			cede_province = POL
			add_core = POL
		}
		wielkopolska_area = {
			set_in_empire = yes
			cede_province = POL
			add_core = POL
		}
		POL = {
			override_country_name = WIELKOPOLSKA
		}
	}
}