# province scope
## add manufactory in scope
### build_possible_manufactory_in_province = yes
build_possible_manufactory_in_province = {
	custom_tooltip = BUILD_MATCHING_MANUFACTORY_IN_THIS_PROVINCE
	hidden_effect = {
		if = {
			limit = {
				has_no_manufactory_trigger = yes
			}
			if = {
				limit = {
					OR = {
						trade_goods = naval_supplies
						trade_goods = fish
						trade_goods = salt
					}
				}
				if = {
					limit = {
						ROOT = { dip_tech = 11 }
					}
					add_building = wharf
				}
				else = {
					ROOT = { add_dip_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = copper
						trade_goods = iron
					}
				}
				if = {
					limit = {
						ROOT = { mil_tech = 11 }
					}
					add_building = weapons
				}
				else = {
					ROOT = { add_mil_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = wool
						trade_goods = cloth
						trade_goods = silk
						trade_goods = dyes
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 11 }
					}
					add_building = textile
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = coffee
						trade_goods = cotton
						trade_goods = sugar
						trade_goods = tobacco
						trade_goods = tea
						trade_goods = cocoa
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 14 }
					}
					add_building = plantations
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = ivory
						trade_goods = slaves
						trade_goods = spices
						trade_goods = fur
						trade_goods = incense
					}
				}
				if = {
					limit = {
						ROOT = { dip_tech = 14 }
					}
					add_building = tradecompany
				}
				else = {
					ROOT = { add_dip_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = grain
						trade_goods = livestock
						trade_goods = wine
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 6 }
					}
					add_building = farm_estate
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = paper
						trade_goods = gems
						trade_goods = tropical_wood
						trade_goods = glass
						trade_goods = chinaware
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 16 }
					}
					add_building = mills
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					has_dlc = "Rule Britannia"
					trade_goods = coal
				}
				if = {
					limit = {
						ROOT = { adm_tech = 21 }
					}
					add_building = furnace
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
		else = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}

## create or add a CoT
### create_or_add_center_of_trade_level = { level = <number> }
create_or_add_center_of_trade_level = {
	if = {
		limit = {
			variable_arithmetic_trigger = {
				export_to_variable = {
					which = var
					value = $level$
				}
				check_variable = { which = var value = 1 }
			}
		}
		if = {
			limit = {
				NOT = { province_has_center_of_trade_of_level = 1 }
			}
			center_of_trade = $level$
		}
		else_if = {
			limit = {
				NOT = { province_has_center_of_trade_of_level = 2 }
			}
			if = {
				limit = {
					variable_arithmetic_trigger = {
						export_to_variable = {
							which = var
							value = $level$
						}
						check_variable = { which = var value = 2 }
					}
				}
				add_center_of_trade_level = 2
			}
			else = {
				add_center_of_trade_level = 1
			}
		}
		else_if = {
			limit = {
				NOT = { province_has_center_of_trade_of_level = 3 }
			}
			add_center_of_trade_level = 1
		}
		else = {
			add_base_production = 2
		}
	}
	else_if = {
		limit = {
			variable_arithmetic_trigger = {
				export_to_variable = {
					which = var
					value = $level$
				}
				NOT = { check_variable = { which = var value = 0 } }
			}
		}
		if = {
			limit = {
				province_has_center_of_trade_of_level = 3
			}
			if = {
				limit = {
					variable_arithmetic_trigger = {
						export_to_variable = {
							which = var
							value = $level$
						}
						check_variable = { which = var value = -1 }
					}
				}
				add_center_of_trade_level = -1
			}
			else = {
				add_center_of_trade_level = -2
			}
		}
		else_if = {
			limit = {
				province_has_center_of_trade_of_level = 2
			}
			add_center_of_trade_level = -1
		}
	}
}

## replace a province modifier with another
### replace_province_modifier = { remove = test_modifier_1 add = test_modifier_2 time = -1 permanent = yes }
replace_province_modifier = {
	if = {
		limit = {
			has_province_modifier = $remove$
		}
		custom_tooltip = tt_replace_modifier_$remove$_with_$add$
		hidden_effect = {
			remove_province_modifier = $remove$
			if = {
				limit = {
					always = $permanent$
				}
				add_permanent_province_modifier = {
					name = $add$
					duration = $time$
				}
			}
			else = {
				add_province_modifier = {
					name = $add$
					duration = $time$
				}
			}
		}
	}
	else = {
		if = {
			limit = {
				always = $permanent$
			}
			add_permanent_province_modifier = {
				name = $add$
				duration = $time$
			}
		}
		else = {
			add_province_modifier = {
				name = $add$
				duration = $time$
			}
		}
	}
}

# country scope
## add <value> legitimacy, republican tradtion, etc.
### add_legitimacy_equivalent = { value = <number> }
add_legitimacy_equivalent = {
	add_legitimacy = $value$
	add_republican_tradition = $value$
	add_horde_unity = $value$
	add_devotion = $value$
	add_meritocracy = $value$
}

## add/remove <value> papal influence, church power, etc.
### change_religious_influence_equivalent = { add = <number> }
### change_religious_influence_equivalent = { remove = <number> }
### value MUST be positive
change_religious_influence_equivalent = {
	[[add]
		add_papal_influence = $add$
		add_church_power = $add$
		add_fervor = $add$
		add_patriarch_authority = 0.$add$
		add_doom = $add$
		add_karma = $add$
		add_authority = $add$
		add_piety = 0.$add$
		if = {
			limit = {
				religion = confucianism
			}
			add_harmony = $add$
		}
		else = {
			hidden_effect = {
				add_harmony = $add$	# just in case any other religion might use harmony, it's added without a tooltip
			}
		}
	]
	[[remove]
		add_papal_influence = -$remove$
		add_church_power = -$remove$
		add_fervor = -$remove$
		add_patriarch_authority = -0.$remove$
		add_doom = -$remove$
		add_karma = -$remove$
		add_authority = -$remove$
		add_piety = -0.$remove$
		if = {
			limit = {
				religion = confucianism
			}
			add_harmony = -$remove$
		}
		else = {
			hidden_effect = {
				add_harmony = -$remove$	# just in case any other religion might use harmony, it's removed without a tooltip
			}
		}
	]
}

## replace a country modifier with another
### replace_country_modifier = { remove = test_modifier_1 add = test_modifier_2 time = -1 }
replace_country_modifier = {
	if = {
		limit = {
			has_country_modifier = $remove$
		}
		custom_tooltip = tt_replace_modifier_$remove$_with_$add$
		hidden_effect = {
			remove_country_modifier = $remove$
			add_country_modifier = {
				name = $add$
				duration = $time$
			}
		}
	}
	else = {
		add_country_modifier = {
			name = $add$
			duration = $time$
		}
	}
}

## release subjects and collapse nation
### release_subjects_and_cede_cores = { who = ROOT release_subjects = yes rebels = yes }
### "release_subjects" and "rebels" are optional
### must be used in the same scope as "who", "who" is used for some in-effect scopes, so only ROOT, FROM and direct tags/event targets work
release_subjects_and_cede_cores = {
	[[release_subjects]
		if = {
			limit = {
				always = $release_subjects$
			}
			release_all_subjects = yes
		}
	]
	custom_tooltip = RELEASE_SUBJECTS_AND_CEDE_CORES_CEDE_CORES_TT
	hidden_effect = {
		every_owned_province = {
			limit = {
				is_capital = no
				any_core_country = {
					NOT = { tag = $who$ }
				}
			}
			random_core_country = {
				limit = {
					NOT = { tag = $who$ }
				}
				hidden_effect = {
					if = {
						limit = {
							exists = no
						}
						set_country_flag = core_country_not_exists
					}
				}
				PREV = { cede_province = PREV }
				hidden_effect = {
					if = {
						limit = {
							has_country_flag = core_country_not_exists
						}
						clr_country_flag = core_country_not_exists
						change_government = monarchy
						add_government_reform = feudalism_reform
					}
				}
			}
		}
	}
	custom_tooltip = RELEASE_SUBJECTS_AND_CEDE_CORES_GAIN_UNREST_TT
	hidden_effect = {
		every_owned_province = {
			limit = {
				OR = {
					is_capital = yes
					NOT = {
						any_core_country = {
							NOT = { tag = $who$ }
						}
					}
				}
			}
			if = {
				limit = {
					any_country = {
						NOT = { tag = $who$ }
						primary_culture = PREV
					}
				}
				random_country = {
					limit = {
						NOT = { tag = $who$ }
						primary_culture = PREV
					}
					PREV = { add_core = PREV }
				}
			}
			add_unrest = 25
			add_nationalism = 10
			[[rebels]
				if = {
					limit = {
						always = $rebels$
						is_capital = no
					}
					nationalist_rebels = 1
				}
			]
		}
	}
	[[rebels]
		if = {
			limit = {
				always = $rebels$
			}
			custom_tooltip = RELEASE_SUBJECTS_AND_CEDE_CORES_SPAWN_REBELS_TT
		}
	]
}

## adds prestige until 100 is reached and then adds the rest as a random monarch power
### add_prestige_or_monarch_power = { amount = <number> }
add_prestige_or_monarch_power = {
	tooltip = {
		add_prestige = $amount$
	}
	custom_tooltip = ME_ADD_PRESTIGE_OR_MONARCHPOWER
	hidden_effect = {
		set_variable = {
			which = prestigetoadd
			value = $amount$
		}
		while = {
			limit = {
				check_variable = {
					which = prestigetoadd
					value = 1
				}
			}
			if = {
				limit = {
					NOT = { prestige = 100 }
				}
				add_prestige = 1
			}
			else = {
				random_list = {
					1 = { add_adm_power = 1 }
					1 = { add_dip_power = 1 }
					1 = { add_mil_power = 1 }
				}
			}
			subtract_variable = {
				which = prestigetoadd
				value = 1
			}
		}
	}
}

## adds army tradition until 100 is reached and then adds the rest as mil power
### add_prestige_or_monarch_power = { amount = <number> }
add_army_tradition_or_mil_power = {
	tooltip = {
		add_army_tradition = $amount$
	}
	custom_tooltip = ME_ADD_ARMY_TRADITION_OR_MIL_POWER
	hidden_effect = {
		set_variable = {
			which = armytradtoadd
			value = $amount$
		}
		while = {
			limit = {
				check_variable = {
					which = armytradtoadd
					value = 1
				}
			}
			if = {
				limit = {
					NOT = { army_tradition = 99.9 }
				}
				add_army_tradition = 1
			}
			else = {
				add_mil_power = 1
			}
			subtract_variable = {
				which = armytradtoadd
				value = 1
			}
		}
	}
}

## breaks the alliance between current scope and who
### break_alliance_with = { who = <scope> }
break_alliance_with = {
	if = {
		limit = {
			alliance_with = $who$
		}
		$who$ = {
			custom_tooltip = BREAK_ALLIANCE_WITH_TT
		}
		hidden_effect = {
			add_rival = $who$
			remove_rival = $who$
		}
	}
}

## adds the specified amount of crown land by reducing the land share of estates
### change_crown_land = { add = <number> }
### change_crown_land = { remove = <number> }
### must use positive numbers!
change_crown_land = {
	[[add]
		change_estate_land_share = {
			estate = all
			share = -$amount$
		}
	]
	[[remove]
		change_estate_land_share = {
			estate = all
			share = $amount$
		}
	]
}

#####################
# 	USAGE
# 	pick_best_tags = {
#   	global_trigger = "your global triggers here" OPTIONAL
#		<example>
#		global_trigger = "
#		OR = {
#			continent = europe
#			allied_with = ROOT
#		}"
#		scale = your trigger type here REQUIRED
#       <example> scale = army_size
#		<number of tags here> = yes (supported numbers: 1-3) REQUIRED
#		event_target_name = "your name for event target here> REQUIRED
#	}
#####################

pick_best_tags = {
	hidden_effect = {
		[[1]
			if = {
				limit = { always = $1$ }
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 1
				}
			}
		]
		[[2]
			if = {
				limit = { always = $2$ }
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 1
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 2
				}
			}
		]
		[[3]
			if = {
				limit = { always = $3$ }
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 1
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 2
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 3
				}
				
			}
		]
		[[4]
			if = {
				limit = { always = $4$ }
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 1
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 2
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 3
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 4
				}
			}
		]
		[[5]
			if = {
				limit = { always = $5$ }
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 1
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 2
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 3
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 4
				}
				pick_best_tag = {
					scale = "$scale$"
					global_trigger = "$global_trigger$"
					event_target_name = "$event_target_name$"
					number = 5
				}
			}
		]
		every_country = {
			limit = {
				has_country_flag = $event_target_name$_exclude
			}
			clr_country_flag = $event_target_name$_exclude
		}
	}
}

pick_best_tag = {
	random_country = {
		limit = {
			NOT = { has_country_flag = $event_target_name$_exclude }
			$global_trigger$
			NOT = {
				any_country = {
					NOT = { has_country_flag = $event_target_name$_exclude }
					$global_trigger$
					NOT = { 
						PREV = {
							$scale$ = PREV
						}
					}
				}
			}
		}
		save_event_target_as = $event_target_name$_$number$
		set_country_flag = $event_target_name$_exclude
	}
}

#halve estate territory and distribute to other estates
halve_estate_land_share = {
	hidden_effect = {
		if = {
			limit = {
				has_estate = $estate$
				
				estate_territory = {
					estate = $estate$
					territory = 2
				}
				
				calc_true_if = {
					amount = 2
					
					has_estate = estate_brahmins
					has_estate = estate_church
					has_estate = estate_maratha
					has_estate = estate_nobles
					has_estate = estate_vaisyas
					has_estate = estate_burghers
					has_estate = estate_cossacks
					has_estate = estate_nomadic_tribes
					has_estate = estate_dhimmi
					has_estate = estate_jains
					has_estate = estate_rajput
					has_estate = estate_maya
				}
			}
			
			export_territory_to_variable = {
				estate = $estate$
			}
			export_to_variable = {
				which = crownland_territory
				value = trigger_value:crown_land_share
			}
			
			if = {
				limit = {
					variable_arithmetic_trigger = {
						export_to_variable = {
							which = ct_temp
							value = trigger_value:crown_land_share
						}
						change_variable = {
							which = ct_temp
							which = $estate$_territory
						}
						NOT = {
							check_variable = {
								which = ct_temp
								value = 96
							}
						}
					}
				}
				
				set_variable = {
					which = half_territory
					which = crownland_territory
				}
				subtract_variable = {
					which = half_territory
					value = 100
				}
				multiply_variable = {
					which = half_territory
					which = $estate$_territory
				}
				set_variable = {
					which = var_2cn
					which = crownland_territory
				}
				multiply_variable = {
					which = var_2cn
					value = 2
				}
				change_variable = {
					which = var_2cn
					which = $estate$_territory
				}
				subtract_variable = {
					which = var_2cn
					value = 200
				}
				divide_variable = {
					which = half_territory
					which = var_2cn
				}
				set_variable = {
					which = $estate$_half_territory
					which = half_territory
				}
				
				while = {
					limit = {
						check_variable = {
							which = $estate$_half_territory
							value = 0
						}
					}
					change_estate_land_share = {
						estate = $estate$
						share = -1
					}
					subtract_variable = {
						which = $estate$_half_territory
						value = 1
					}
				}
				
				set_variable = {
					which = $estate$_half_territory
					which = half_territory
				}
				
				while = {
					limit = {
						check_variable = {
							which = $estate$_half_territory
							value = 0
						}
					}
					change_estate_land_share = {
						estate = all
						share = 1
					}
					subtract_variable = {
						which = $estate$_half_territory
						value = 1
					}
				}
			}
		}
	}
}

export_territory_to_variable = {
	hidden_effect = {
		if = { limit = { estate_territory = { estate = $estate$	territory = 50 } }
			if = { limit = { estate_territory = { estate = $estate$	territory = 75 } }
				if = { limit = { estate_territory = { estate = $estate$	territory = 87.5 } }
					if = { limit = { estate_territory = { estate = $estate$	territory = 93.75 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 96.875 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 98.4375 } }
								set_variable = { which = $estate$_territory	value = 99 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 97 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 95.3125 } }
								set_variable = { which = $estate$_territory	value = 96 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 94 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 90.625 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 92.1875 } }
								set_variable = { which = $estate$_territory	value = 93 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 91 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 89.0625 } }
								set_variable = { which = $estate$_territory	value = 90 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 88 }
							}
						}
					}
				}
				else = {
					if = { limit = { estate_territory = { estate = $estate$	territory = 81.25 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 84.375 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 85.9375 } }
								set_variable = { which = $estate$_territory	value = 86 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 85 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 82.8125 } }
								set_variable = { which = $estate$_territory	value = 83 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 82 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 78.125 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 79.6875 } }
								set_variable = { which = $estate$_territory	value = 80 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 79 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 76.5625 } }
								set_variable = { which = $estate$_territory	value = 77 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 75 }
							}
						}
					}
				}
			}
			else = {
				if = { limit = { estate_territory = { estate = $estate$	territory = 62.5 } }
					if = { limit = { estate_territory = { estate = $estate$	territory = 68.75 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 71.875 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 73.4375 } }
								set_variable = { which = $estate$_territory	value = 74 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 72 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 70.3125 } }
								set_variable = { which = $estate$_territory	value = 71 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 69 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 65.625 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 67.1875 } }
								set_variable = { which = $estate$_territory	value = 68 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 66 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 64.0625 } }
								set_variable = { which = $estate$_territory	value = 65 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 63 }
							}
						}
					}
				}
				else = {
					if = { limit = { estate_territory = { estate = $estate$	territory = 56.25 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 59.375 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 60.9375 } }
								set_variable = { which = $estate$_territory	value = 61 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 60 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 57.8125 } }
								set_variable = { which = $estate$_territory	value = 58 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 57 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 53.125 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 54.6875 } }
								set_variable = { which = $estate$_territory	value = 55 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 54 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 51.5625 } }
								set_variable = { which = $estate$_territory	value = 52 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 50 }
							}
						}
					}
				}
			}
		}
		else = {
			if = { limit = { estate_territory = { estate = $estate$	territory = 25 } }
				if = { limit = { estate_territory = { estate = $estate$	territory = 37.5 } }
					if = { limit = { estate_territory = { estate = $estate$	territory = 43.75 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 46.875 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 48.4375 } }
								set_variable = { which = $estate$_territory	value = 49 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 47 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 45.3125 } }
								set_variable = { which = $estate$_territory	value = 46 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 44 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 40.625 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 42.1875 } }
								set_variable = { which = $estate$_territory	value = 43 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 41 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 39.0625 } }
								set_variable = { which = $estate$_territory	value = 40 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 38 }
							}
						}
					}
				}
				else = {
					if = { limit = { estate_territory = { estate = $estate$	territory = 31.25 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 34.375 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 35.9375 } }
								set_variable = { which = $estate$_territory	value = 36 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 35 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 32.8125 } }
								set_variable = { which = $estate$_territory	value = 33 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 32 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 28.125 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 29.6875 } }
								set_variable = { which = $estate$_territory	value = 30 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 29 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 26.5625 } }
								set_variable = { which = $estate$_territory	value = 27 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 25 }
							}
						}
					}
				}
			}
			else = {
				if = { limit = { estate_territory = { estate = $estate$	territory = 12.5 } }
					if = { limit = { estate_territory = { estate = $estate$	territory = 18.75 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 21.875 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 23.4375 } }
								set_variable = { which = $estate$_territory	value = 24 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 22 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 20.3125 } }
								set_variable = { which = $estate$_territory	value = 21 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 19 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 15.625 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 17.1875 } }
								set_variable = { which = $estate$_territory	value = 18 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 16 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 14.0625 } }
								set_variable = { which = $estate$_territory	value = 15 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 13 }
							}
						}
					}
				}
				else = {
					if = { limit = { estate_territory = { estate = $estate$	territory = 6.25 } }
						if = { limit = { estate_territory = { estate = $estate$	territory = 9.375 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 10.9375 } }
								set_variable = { which = $estate$_territory	value = 11 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 10 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 7.8125 } }
								set_variable = { which = $estate$_territory	value = 8 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 7 }
							}
						}
					}
					else = {
						if = { limit = { estate_territory = { estate = $estate$	territory = 3.125 } }
							if = { limit = { estate_territory = { estate = $estate$	territory = 4.6875 } }
								set_variable = { which = $estate$_territory	value = 5 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 4 }
							}
						}
						else = {
							if = { limit = { estate_territory = { estate = $estate$	territory = 1.5625 } }
								set_variable = { which = $estate$_territory	value = 2 }
							}
							else = {
								set_variable = { which = $estate$_territory	value = 1 }
							}
						}
					}
				}
			}
		}
	}
}






