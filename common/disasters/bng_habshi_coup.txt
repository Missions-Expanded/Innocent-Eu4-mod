bng_habshi_coup_disaster = {
	potential = {
		NOT = {
			OR = {
				has_country_flag = bng_habshi_coup_resolved
				has_country_flag = bng_habshi_coup_foiled
			}
		}
		has_country_flag = bng_habshi_coup_in_progress
	}
	can_start = {
		OR = {
			NOT = { 
				legitimacy = 90 
			}
			has_consort_regency = yes
			overextension_percentage = 0.01
		}
	}
	can_stop = {
		OR = {
			has_any_disaster = yes
			custom_trigger_tooltip = {
				tooltip = BNG_HABSHI_COUP_FOILED_TT
				has_country_flag = bng_habshi_coup_foiled
			}
		}
	}
	progress = {
		modifier = {
			factor = 1
			has_country_modifier = bng_habshi_influence_1
		}
		modifier = {
			factor = 2
			has_country_modifier = bng_habshi_influence_2
		}
		modifier = {
			factor = 3
			has_country_modifier = bng_habshi_influence_3
		}
		modifier = {
			factor = 5
			has_country_modifier = bng_habshi_influence_4
		}
		modifier = {
			factor = 8
			has_country_modifier = bng_habshi_influence_5
		}
		modifier = {
			factor = 10
			has_country_modifier = bng_habshi_influence_6
		}
		modifier = {
			factor = 5
			yearly_corruption_increase = 0.01
		}
		modifier = {
			factor = 15
			is_in_deficit = yes
		}
		modifier = {
			factor = 5
			NOT = {
				AND = {
					adm = 2
					dip = 2
					mil = 2
				}
			}
		}
		modifier = {
			factor = 5
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 2
			num_of_mercenaries = 1
		}
		modifier = {
			factor = 2
			num_of_mercenaries = 2
		}
		modifier = {
			factor = 2
			num_of_mercenaries = 3
		}
		modifier = {
			factor = 2
			num_of_mercenaries = 4
		}
		modifier = {
			factor = 2
			num_of_mercenaries = 5
		}
		modifier = {
			factor = -10
			AND = {
				adm = 4
				dip = 4
				mil = 4
			}
		}
		modifier = {
			factor = -5
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 60
			}
		}
		modifier = {
			factor = -5
			custom_trigger_tooltip = {
				tooltip = BNG_TOLERANCE_HINDU_TT
				hinduism = 3
			}
		}
	}
	can_end = {
		stability = 1
		NOT = { num_of_rebel_armies = 1 }
		is_at_war = no
		OR = {
			has_ruler = "Alauddin"
			has_ruler = "Shamsuddin"
			had_country_flag = {
				flag = bng_habshi_coup_in_progress
				days = 1825
			}
		}
		legitimacy = 80
	}
	modifier = {
		global_unrest = 5
		global_autonomy = 0.05
		monarch_lifespan = -0.5
		block_introduce_heir = yes
	}
	on_start = bng_habshi_events.9 #Choose Between Rulers
	on_end = bng_habshi_events.11 #Get Stability and reward based on ruler
}